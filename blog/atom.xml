<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="atom.xsl"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://hyochan.github.io/expo-iap/blog</id>
    <title>Expo IAP Blog</title>
    <updated>2025-10-28T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://hyochan.github.io/expo-iap/blog"/>
    <subtitle>Expo IAP Blog</subtitle>
    <icon>https://hyochan.github.io/expo-iap/img/favicon.png</icon>
    <entry>
        <title type="html"><![CDATA[3.1.22 - Horizon OS Support]]></title>
        <id>https://hyochan.github.io/expo-iap/blog/3.1.22</id>
        <link href="https://hyochan.github.io/expo-iap/blog/3.1.22"/>
        <updated>2025-10-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Horizon OS Support]]></summary>
        <content type="html"><![CDATA[<p><img decoding="async" loading="lazy" alt="Horizon OS Support" src="https://hyochan.github.io/expo-iap/assets/images/horizon-support-780baf2aea9dd1809162ddf4874d554f.png" width="1024" height="1024" class="img_ev3q"></p>
<p>Expo IAP 3.1.22 introduces <strong>Horizon OS support</strong> for Meta Quest devices, enabling developers to implement in-app purchases in VR applications using the same familiar API.</p>
<p>This release integrates Meta's Platform SDK for in-app purchases on Horizon OS, while maintaining the unified <a href="https://openiap.dev/" target="_blank" rel="noopener noreferrer">OpenIAP</a> interface across iOS, Android, and now Horizon OS.</p>
<p>👉 <a href="https://github.com/hyochan/expo-iap/releases/tag/3.1.22" target="_blank" rel="noopener noreferrer">View the 3.1.22 release</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-highlights">🚀 Highlights<a href="https://hyochan.github.io/expo-iap/blog/3.1.22#-highlights" class="hash-link" aria-label="Direct link to 🚀 Highlights" title="Direct link to 🚀 Highlights">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="seamless-horizon-os-integration">Seamless Horizon OS Integration<a href="https://hyochan.github.io/expo-iap/blog/3.1.22#seamless-horizon-os-integration" class="hash-link" aria-label="Direct link to Seamless Horizon OS Integration" title="Direct link to Seamless Horizon OS Integration">​</a></h3>
<p>Expo IAP now supports Meta Quest devices running Horizon OS with <strong>zero code changes</strong> required. Simply enable Horizon mode in your configuration, and your existing purchase code works seamlessly across all platforms.</p>
<p><strong>Key Features</strong>:</p>
<ul>
<li>✅ In-app purchases (consumable and non-consumable)</li>
<li>✅ Subscriptions</li>
<li>✅ Purchase restoration</li>
<li>✅ Product fetching with localized pricing</li>
<li>✅ Purchase verification</li>
<li>✅ Same API as iOS and Android - no platform-specific code needed</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="expo-config-plugin-support">Expo Config Plugin Support<a href="https://hyochan.github.io/expo-iap/blog/3.1.22#expo-config-plugin-support" class="hash-link" aria-label="Direct link to Expo Config Plugin Support" title="Direct link to Expo Config Plugin Support">​</a></h3>
<p>The new Horizon configuration automatically sets up your Android project for Horizon OS:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// app.config.ts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  expo</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    plugins</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          modules</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            horizon</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Enable Horizon OS support</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            horizonAppId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'YOUR_HORIZON_APP_ID'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Required: Your Horizon App ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>For detailed setup instructions, see the <a href="https://hyochan.github.io/expo-iap/docs/getting-started/setup-horizon">Horizon OS Setup Guide</a>.</p>
<p>The plugin automatically:</p>
<ul>
<li>Sets <code>horizonEnabled=true</code> in <code>gradle.properties</code></li>
<li>Uses <code>openiap-google-horizon</code> artifact instead of <code>openiap-google</code></li>
<li>Adds Horizon Platform SDK and Billing SDK dependencies</li>
<li>Configures your app with the Horizon App ID metadata</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-getting-started">📦 Getting Started<a href="https://hyochan.github.io/expo-iap/blog/3.1.22#-getting-started" class="hash-link" aria-label="Direct link to 📦 Getting Started" title="Direct link to 📦 Getting Started">​</a></h2>
<p>To get started with Horizon OS integration:</p>
<ol>
<li>
<p><strong>Install expo-iap 3.1.22 or later</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bun add expo-iap@3.1.22</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install expo-iap@3.1.22</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn add expo-iap@3.1.22</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Follow the setup guide</strong>: See the <a href="https://hyochan.github.io/expo-iap/docs/getting-started/setup-horizon">Horizon OS Setup Guide</a> for detailed instructions on configuration, testing, and troubleshooting.</p>
</li>
</ol>
<p><strong>No Breaking Changes</strong>: All changes are additive. Existing apps will continue to work without modifications. Horizon support is opt-in via configuration.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-references">🔗 References<a href="https://hyochan.github.io/expo-iap/blog/3.1.22#-references" class="hash-link" aria-label="Direct link to 🔗 References" title="Direct link to 🔗 References">​</a></h2>
<ul>
<li><a href="https://hyochan.github.io/expo-iap/docs/getting-started/setup-horizon">Horizon OS Setup Guide</a></li>
<li><a href="https://openiap.dev/" target="_blank" rel="noopener noreferrer">OpenIAP Documentation</a></li>
<li><a href="https://developer.oculus.com/" target="_blank" rel="noopener noreferrer">Meta Quest Developer Hub</a></li>
</ul>
<p>Questions or issues? Let us know via <a href="https://github.com/hyochan/expo-iap/issues" target="_blank" rel="noopener noreferrer">GitHub issues</a>.</p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <author>
            <name>Ram N</name>
            <uri>https://github.com/axe-fb</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="horizon-os" term="horizon-os"/>
        <category label="Android" term="Android"/>
        <category label="meta-quest" term="meta-quest"/>
        <category label="vr" term="vr"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[3.1.9 - Alternative Billing Support]]></title>
        <id>https://hyochan.github.io/expo-iap/blog/3.1.9</id>
        <link href="https://hyochan.github.io/expo-iap/blog/3.1.9"/>
        <updated>2025-10-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Expo IAP 3.1.9 introduces Alternative Billing support for both iOS and Android platforms, enabling developers to offer external payment options in compliance with App Store and Google Play requirements.]]></summary>
        <content type="html"><![CDATA[<p>Expo IAP 3.1.9 introduces <strong>Alternative Billing</strong> support for both iOS and Android platforms, enabling developers to offer external payment options in compliance with App Store and Google Play requirements.</p>
<p>This release integrates StoreKit External Purchase APIs (iOS 16.0+) and Google Play Alternative Billing APIs, providing a unified interface for alternative payment flows across platforms.</p>
<p>👉 <a href="https://github.com/hyochan/expo-iap/releases/tag/3.1.9" target="_blank" rel="noopener noreferrer">View the 3.1.9 release</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-highlights">🚀 Highlights<a href="https://hyochan.github.io/expo-iap/blog/3.1.9#-highlights" class="hash-link" aria-label="Direct link to 🚀 Highlights" title="Direct link to 🚀 Highlights">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ios-alternative-billing-storekit-external-purchase">iOS Alternative Billing (StoreKit External Purchase)<a href="https://hyochan.github.io/expo-iap/blog/3.1.9#ios-alternative-billing-storekit-external-purchase" class="hash-link" aria-label="Direct link to iOS Alternative Billing (StoreKit External Purchase)" title="Direct link to iOS Alternative Billing (StoreKit External Purchase)">​</a></h3>
<p>Three new APIs for managing external purchases on iOS:</p>
<ul>
<li><strong><a href="https://hyochan.github.io/expo-iap/docs/api/methods/core-methods#canpresentexternalpurchasenoticeios"><code>canPresentExternalPurchaseNoticeIOS()</code></a></strong> - Check if the notice sheet is available (iOS 18.2+)</li>
<li><strong><a href="https://hyochan.github.io/expo-iap/docs/api/methods/core-methods#presentexternalpurchasenoticesheetios"><code>presentExternalPurchaseNoticeSheetIOS()</code></a></strong> - Present a notice before redirecting to external purchase (iOS 18.2+)</li>
<li><strong><a href="https://hyochan.github.io/expo-iap/docs/api/methods/core-methods#presentexternalpurchaselinkios"><code>presentExternalPurchaseLinkIOS(url)</code></a></strong> - Open external purchase link in Safari (iOS 16.0+)</li>
</ul>
<p><strong>Expo Config Plugin Support</strong>: The new <code>iosAlternativeBilling</code> configuration automatically sets up required Info.plist keys and entitlements:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// app.config.ts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  plugins</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        iosAlternativeBilling</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          countries</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'kr'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'nl'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ISO 3166-1 alpha-2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          links</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            kr</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'https://your-site.com/kr'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            nl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'https://your-site.com/nl'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          enableExternalPurchaseLink</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>The plugin handles:</p>
<ul>
<li><code>SKExternalPurchase</code> - Country codes where external purchases are supported</li>
<li><code>SKExternalPurchaseLink</code> - External purchase URLs per country (iOS 15.4+)</li>
<li><code>SKExternalPurchaseMultiLink</code> - Multiple URLs per country (iOS 17.5+)</li>
<li><code>SKExternalPurchaseCustomLinkRegions</code> - Custom link regions (iOS 18.1+)</li>
<li><code>SKExternalPurchaseLinkStreamingRegions</code> - Streaming regions for music apps (iOS 18.2+)</li>
<li>StoreKit entitlements: <code>com.apple.developer.storekit.external-purchase*</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="android-alternative-billing">Android Alternative Billing<a href="https://hyochan.github.io/expo-iap/blog/3.1.9#android-alternative-billing" class="hash-link" aria-label="Direct link to Android Alternative Billing" title="Direct link to Android Alternative Billing">​</a></h3>
<p>Three new APIs for Google Play Alternative Billing flow:</p>
<ul>
<li><strong><a href="https://hyochan.github.io/expo-iap/docs/api/methods/core-methods#checkalternativebillingavailabilityandroid"><code>checkAlternativeBillingAvailabilityAndroid()</code></a></strong> - Check if alternative billing is available for the user</li>
<li><strong><a href="https://hyochan.github.io/expo-iap/docs/api/methods/core-methods#showalternativebillingdialogandroid"><code>showAlternativeBillingDialogAndroid()</code></a></strong> - Show Google's required information dialog</li>
<li><strong><a href="https://hyochan.github.io/expo-iap/docs/api/methods/core-methods#createalternativebillingtokenandroid"><code>createAlternativeBillingTokenAndroid(sku)</code></a></strong> - Generate reporting token after successful payment</li>
</ul>
<p><strong>Configuration Support</strong>: <code>initConnection()</code> now accepts an optional config parameter:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">initConnection</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Initialize with alternative billing mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">initConnection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alternativeBillingModeAndroid</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'user-choice'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// or 'alternative-only'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><strong>Two Billing Modes</strong>:</p>
<ul>
<li><code>user-choice</code> - Users choose between Google Play billing (30% fee) or your payment system (lower fee)</li>
<li><code>alternative-only</code> - Only your payment system is available (Google Play billing disabled)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-usage-examples">📚 Usage Examples<a href="https://hyochan.github.io/expo-iap/blog/3.1.9#-usage-examples" class="hash-link" aria-label="Direct link to 📚 Usage Examples" title="Direct link to 📚 Usage Examples">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ios-external-purchase">iOS External Purchase<a href="https://hyochan.github.io/expo-iap/blog/3.1.9#ios-external-purchase" class="hash-link" aria-label="Direct link to iOS External Purchase" title="Direct link to iOS External Purchase">​</a></h3>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">presentExternalPurchaseLinkIOS</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Redirect user to external purchase website</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">presentExternalPurchaseLinkIOS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">'https://your-site.com/checkout'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">success</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'User redirected to external website'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="android-alternative-billing-1">Android Alternative Billing<a href="https://hyochan.github.io/expo-iap/blog/3.1.9#android-alternative-billing-1" class="hash-link" aria-label="Direct link to Android Alternative Billing" title="Direct link to Android Alternative Billing">​</a></h3>
<p><strong>User Choice Mode</strong> - When using <code>user-choice</code> mode, listen for user selection with <strong><a href="https://hyochan.github.io/expo-iap/docs/api/methods/listeners#userchoicebillinglistenerandroid"><code>userChoiceBillingListenerAndroid()</code></a></strong>:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">initConnection</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> userChoiceBillingListenerAndroid</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Initialize with user-choice mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">initConnection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alternativeBillingModeAndroid</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'user-choice'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Listen for when user selects alternative billing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> subscription </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">userChoiceBillingListenerAndroid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">details</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'User selected alternative billing'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Token:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> details</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">externalTransactionToken</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Products:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> details</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">products</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Process payment in your system, then report token to Google</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">processPaymentAndReportToken</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">details</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Clean up when done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">remove</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><strong>Alternative Only Mode</strong> - Manual 3-step flow:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  checkAlternativeBillingAvailabilityAndroid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  showAlternativeBillingDialogAndroid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  createAlternativeBillingTokenAndroid</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Step 1: Check availability</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> isAvailable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">checkAlternativeBillingAvailabilityAndroid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Step 2: Show Google's information dialog</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> userAccepted </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">showAlternativeBillingDialogAndroid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">userAccepted</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Step 3: Process payment in your system, then create token</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> token </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createAlternativeBillingTokenAndroid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">productId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Step 4: Report token to Google Play backend within 24 hours</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">reportTokenToGooglePlay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-example-app">🎨 Example App<a href="https://hyochan.github.io/expo-iap/blog/3.1.9#-example-app" class="hash-link" aria-label="Direct link to 🎨 Example App" title="Direct link to 🎨 Example App">​</a></h2>
<p>A complete alternative billing demo screen has been added to the example app:</p>
<ul>
<li><strong>Platform-specific flows</strong> - Demonstrates iOS and Android alternative billing patterns</li>
<li><strong>Billing mode toggle</strong> (Android) - Switch between <code>alternative-only</code> and <code>user-choice</code> with auto-reconnect</li>
<li><strong>External URL input</strong> (iOS) - Configure and test external purchase links</li>
<li><strong>Real-time results</strong> - View purchase flow status and responses</li>
<li><strong>Step-by-step guidance</strong> - Visual flow diagrams for both platforms</li>
</ul>
<p>Navigate to <code>example/app/alternative-billing.tsx</code> to explore the implementation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-openiap-upgrades">🔧 OpenIAP Upgrades<a href="https://hyochan.github.io/expo-iap/blog/3.1.9#-openiap-upgrades" class="hash-link" aria-label="Direct link to 🔧 OpenIAP Upgrades" title="Direct link to 🔧 OpenIAP Upgrades">​</a></h2>
<ul>
<li><strong>openiap-apple</strong> upgraded to <strong>1.2.10</strong> with StoreKit external purchase support</li>
<li><strong>openiap-google</strong> upgraded to <strong>1.2.12</strong> with alternative billing APIs</li>
<li><strong>openiap-gql</strong> upgraded to <strong>1.0.12</strong> with updated type definitions</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-testing">🧪 Testing<a href="https://hyochan.github.io/expo-iap/blog/3.1.9#-testing" class="hash-link" aria-label="Direct link to 🧪 Testing" title="Direct link to 🧪 Testing">​</a></h2>
<p>Added 30+ comprehensive tests for the iOS config plugin:</p>
<ul>
<li>Info.plist configuration validation</li>
<li>Entitlements setup verification</li>
<li>URL validation and country code checks</li>
<li>Edge case handling</li>
</ul>
<p>All existing tests continue to pass with 98%+ coverage.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-platform-requirements">⚠️ Platform Requirements<a href="https://hyochan.github.io/expo-iap/blog/3.1.9#%EF%B8%8F-platform-requirements" class="hash-link" aria-label="Direct link to ⚠️ Platform Requirements" title="Direct link to ⚠️ Platform Requirements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ios">iOS<a href="https://hyochan.github.io/expo-iap/blog/3.1.9#ios" class="hash-link" aria-label="Direct link to iOS" title="Direct link to iOS">​</a></h3>
<ul>
<li><strong>Minimum Version</strong>: iOS 16.0+ for external purchase links, iOS 18.2+ for notice sheet</li>
<li><strong>App Store Connect</strong>: Must request and receive approval for external purchase entitlements</li>
<li><strong>Provisioning Profile</strong>: Must include StoreKit external purchase entitlements</li>
<li>See <a href="https://developer.apple.com/documentation/storekit/external-purchase" target="_blank" rel="noopener noreferrer">StoreKit External Purchase documentation</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="android">Android<a href="https://hyochan.github.io/expo-iap/blog/3.1.9#android" class="hash-link" aria-label="Direct link to Android" title="Direct link to Android">​</a></h3>
<ul>
<li><strong>Google Play Console</strong>: Must be approved for alternative billing program</li>
<li><strong>Token Reporting</strong>: Must report tokens to Google within 24 hours</li>
<li><strong>Backend Integration</strong>: Server-side validation and reporting required</li>
<li>See <a href="https://developer.android.com/google/play/billing/alternative" target="_blank" rel="noopener noreferrer">Google Play Alternative Billing documentation</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-installation">📦 Installation<a href="https://hyochan.github.io/expo-iap/blog/3.1.9#-installation" class="hash-link" aria-label="Direct link to 📦 Installation" title="Direct link to 📦 Installation">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bun add expo-iap@3.1.9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install expo-iap@3.1.9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn add expo-iap@3.1.9</span><br></span></code></pre></div></div>
<p>After installation, run prebuild to apply iOS config plugin changes:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npx expo prebuild --clean</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-important-notes">🚨 Important Notes<a href="https://hyochan.github.io/expo-iap/blog/3.1.9#-important-notes" class="hash-link" aria-label="Direct link to 🚨 Important Notes" title="Direct link to 🚨 Important Notes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="for-ios-developers">For iOS Developers<a href="https://hyochan.github.io/expo-iap/blog/3.1.9#for-ios-developers" class="hash-link" aria-label="Direct link to For iOS Developers" title="Direct link to For iOS Developers">​</a></h3>
<p>Alternative billing on iOS requires explicit approval from Apple. During development:</p>
<ol>
<li>Keep <code>iosAlternativeBilling</code> commented out in your config</li>
<li>Test regular IAP flows without entitlements</li>
<li>When ready for production, uncomment the config and follow Apple's approval process</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="for-android-developers">For Android Developers<a href="https://hyochan.github.io/expo-iap/blog/3.1.9#for-android-developers" class="hash-link" aria-label="Direct link to For Android Developers" title="Direct link to For Android Developers">​</a></h3>
<p>Alternative billing on Android requires:</p>
<ol>
<li>Approval from Google Play Console</li>
<li>Backend integration to report tokens within 24 hours</li>
<li>Proper error handling for users not eligible for alternative billing</li>
</ol>
<p><strong>No Breaking Changes</strong>: All changes are additive. Existing apps will continue to work without modifications.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-references">🔗 References<a href="https://hyochan.github.io/expo-iap/blog/3.1.9#-references" class="hash-link" aria-label="Direct link to 🔗 References" title="Direct link to 🔗 References">​</a></h2>
<ul>
<li><a href="https://openiap.dev/" target="_blank" rel="noopener noreferrer">OpenIAP Documentation</a></li>
<li><a href="https://developer.apple.com/documentation/storekit/external-purchase" target="_blank" rel="noopener noreferrer">StoreKit External Purchase</a></li>
<li><a href="https://developer.android.com/google/play/billing/alternative" target="_blank" rel="noopener noreferrer">Google Play Alternative Billing</a></li>
<li><a href="https://github.com/hyochan/expo-iap/blob/main/example/app/alternative-billing.tsx" target="_blank" rel="noopener noreferrer">Example Implementation</a></li>
</ul>
<p>Questions or issues? Let us know via <a href="https://github.com/hyochan/expo-iap/issues" target="_blank" rel="noopener noreferrer">GitHub issues</a>.</p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="alternative-billing" term="alternative-billing"/>
        <category label="iOS" term="iOS"/>
        <category label="Android" term="Android"/>
        <category label="storekit" term="storekit"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[3.1.0 - Full OpenIAP Ecosystem Adoption]]></title>
        <id>https://hyochan.github.io/expo-iap/blog/3.1.0</id>
        <link href="https://hyochan.github.io/expo-iap/blog/3.1.0"/>
        <updated>2025-09-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Expo IAP 3.1.0 graduates the project into the full OpenIAP ecosystem. The release ships with three dedicated native stacks:]]></summary>
        <content type="html"><![CDATA[<p>Expo IAP 3.1.0 graduates the project into the full <strong>OpenIAP ecosystem</strong>. The release ships with three dedicated native stacks:</p>
<ul>
<li><strong><a href="https://github.com/hyodotdev/openiap-apple" target="_blank" rel="noopener noreferrer">openiap-apple</a></strong> — StoreKit 2 implementation for Apple platforms</li>
<li><strong><a href="https://github.com/hyodotdev/openiap-google" target="_blank" rel="noopener noreferrer">openiap-google</a></strong> — Google Play Billing integration for Android</li>
<li><strong><a href="https://github.com/hyodotdev/openiap-gql" target="_blank" rel="noopener noreferrer">openiap-gql</a></strong> — GraphQL helpers that drive types and tooling</li>
</ul>
<p>From 3.1.0 onward, Expo IAP stays in lockstep with these modules: Apple <strong>v1.2.2</strong>, Google <strong>v1.2.6</strong>, and GQL <strong>v1.0.8</strong>. That shared version alignment gives Expo IAP stable native compatibility and a unified type system straight from the OpenIAP schema.</p>
<p>👉 <a href="https://github.com/hyochan/expo-iap/releases/tag/3.1.0" target="_blank" rel="noopener noreferrer">View the 3.1.0 release</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-highlights">🚀 Highlights<a href="https://hyochan.github.io/expo-iap/blog/3.1.0#-highlights" class="hash-link" aria-label="Direct link to 🚀 Highlights" title="Direct link to 🚀 Highlights">​</a></h2>
<ul>
<li>Adopted the full OpenIAP core stack—<a href="https://github.com/hyodotdev/openiap-gql" target="_blank" rel="noopener noreferrer">openiap-gql</a>, <a href="https://github.com/hyodotdev/openiap-apple" target="_blank" rel="noopener noreferrer">openiap-apple</a> v1.2.2, and <a href="https://github.com/hyodotdev/openiap-google" target="_blank" rel="noopener noreferrer">openiap-google</a> v1.2.6)—bringing Expo IAP into alignment with the shared ecosystem used across Flutter, React Native, and KMP.</li>
<li>Trimmed roughly <strong>two thirds</strong> of our custom native bridge code by delegating logic to the OpenIAP modules.</li>
<li>Expanded automated coverage to about <strong>98%</strong>, spanning purchase flows, native bridge entry points, and error mapping utilities.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-openiap-upgrades">🔁 OpenIAP Upgrades<a href="https://hyochan.github.io/expo-iap/blog/3.1.0#-openiap-upgrades" class="hash-link" aria-label="Direct link to 🔁 OpenIAP Upgrades" title="Direct link to 🔁 OpenIAP Upgrades">​</a></h2>
<ul>
<li>Normalized purchase payloads on both platforms so every bridge call sanitizes platform casing and forwards the complete OpenIAP record.</li>
<li>Migrated Android to the new <code>RequestPurchaseProps</code> / <code>PurchaseResult</code> / <code>ErrorCode</code> contracts, achieving parity with the Apple module.</li>
<li>Centralized native dependency versions via <a href="https://github.com/hyochan/expo-iap/blob/main/openiap-versions.json" target="_blank" rel="noopener noreferrer"><code>openiap-versions.json</code></a>; Gradle now fails fast if the Google artifact version is missing and scripts/migrations read from one source of truth.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-bug-fixes">🐞 Bug Fixes<a href="https://hyochan.github.io/expo-iap/blog/3.1.0#-bug-fixes" class="hash-link" aria-label="Direct link to 🐞 Bug Fixes" title="Direct link to 🐞 Bug Fixes">​</a></h2>
<ul>
<li><code>fix(android): honor subscription offerToken</code> (<a href="https://github.com/hyochan/expo-iap/pull/214" target="_blank" rel="noopener noreferrer">#214</a>) restores proper handling of <code>subscriptionOfferDetailsAndroid</code> so Google Play discounts apply reliably.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-safer-purchases--better-errors">🛡️ Safer Purchases &amp; Better Errors<a href="https://hyochan.github.io/expo-iap/blog/3.1.0#%EF%B8%8F-safer-purchases--better-errors" class="hash-link" aria-label="Direct link to 🛡️ Safer Purchases &amp; Better Errors" title="Direct link to 🛡️ Safer Purchases &amp; Better Errors">​</a></h2>
<ul>
<li><code>requestPurchase</code> on iOS explicitly rejects unsupported product types instead of silently treating <code>all</code> as <code>in-app</code>.</li>
<li>Error handling now consistently routes through the shared <code>ErrorCode</code> table so promise rejections, platform conversions, and predicates remain aligned.</li>
<li>Additional coverage for <code>createPurchaseError</code>, <code>ErrorCodeUtils</code>, and the user-friendly error helper keeps error copy in sync with OpenIAP terminology.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-tooling--workflow">🛠️ Tooling &amp; Workflow<a href="https://hyochan.github.io/expo-iap/blog/3.1.0#%EF%B8%8F-tooling--workflow" class="hash-link" aria-label="Direct link to 🛠️ Tooling &amp; Workflow" title="Direct link to 🛠️ Tooling &amp; Workflow">​</a></h2>
<ul>
<li>Contributor docs clarify how to bump OpenIAP packages, regenerate types, and keep <code>openiap-versions.json</code> synchronized for Android and iOS builds.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-important-changes">⚠️ Important Changes<a href="https://hyochan.github.io/expo-iap/blog/3.1.0#%EF%B8%8F-important-changes" class="hash-link" aria-label="Direct link to ⚠️ Important Changes" title="Direct link to ⚠️ Important Changes">​</a></h2>
<ul>
<li><strong>Transaction identifiers</strong>: <code>transactionId</code> is reinstated as the primary store reference (<code>orderId</code> on Android, StoreKit transaction ID on iOS). Android’s generic <code>id</code> is no longer repurposed for orders; when Google Play omits an <code>orderId</code> (typical for consumables), <code>transactionId</code> becomes <code>null</code> and clients should rely on the unified <code>purchaseToken</code> (Android purchase token / iOS JWS). This value is the canonical receipt for server validation. See the related <a href="https://github.com/hyochan/react-native-iap/discussions/3016" target="_blank" rel="noopener noreferrer">react-native-iap discussion</a>.</li>
<li><strong>iOS request types</strong>: purchase requests must specify either <code>in-app</code> or <code>subs</code>. Passing <code>all</code> (or any other type) throws an explicit error.</li>
<li><strong>Promoted products</strong>: events now emit the full sanitized product payload; downstream listeners should expect the entire object instead of just <code>productId</code>.</li>
<li><strong>Deprecated helpers removed</strong>: <code>getProducts</code>, <code>requestSubscription</code>, and <code>requestProducts</code> are removed. Use <code>fetchProducts</code> with the unified purchase flow.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="minor-updates">Minor Updates<a href="https://hyochan.github.io/expo-iap/blog/3.1.0#minor-updates" class="hash-link" aria-label="Direct link to Minor Updates" title="Direct link to Minor Updates">​</a></h2>
<ul>
<li>Removed the legacy <code>useIAP</code> state shims (<code>currentPurchase</code>, <code>currentPurchaseError</code>, and their <code>clear*</code> helpers) in favour of the hook’s <code>onPurchaseSuccess</code> / <code>onPurchaseError</code> callbacks (<a href="https://github.com/hyochan/expo-iap/pull/213" target="_blank" rel="noopener noreferrer">#213</a>).</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-installation">📦 Installation<a href="https://hyochan.github.io/expo-iap/blog/3.1.0#-installation" class="hash-link" aria-label="Direct link to 📦 Installation" title="Direct link to 📦 Installation">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bun add expo-iap@3.1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install expo-iap@3.1.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn add expo-iap@3.1.0</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-references">🔗 References<a href="https://hyochan.github.io/expo-iap/blog/3.1.0#-references" class="hash-link" aria-label="Direct link to 🔗 References" title="Direct link to 🔗 References">​</a></h2>
<ul>
<li>Recent work: <a href="https://github.com/hyochan/expo-iap/pulls?q=is%3Apr+is%3Aclosed" target="_blank" rel="noopener noreferrer">Closed pull requests</a></li>
<li>Release builds on the OpenIAP ecosystem: <a href="https://openiap.dev/" target="_blank" rel="noopener noreferrer">openiap.dev</a></li>
</ul>
<p>Enjoy the smoother upgrade path and richer diagnostics shipped in 3.1.0! Let us know how it goes via <a href="https://github.com/hyochan/expo-iap/issues" target="_blank" rel="noopener noreferrer">GitHub issues</a>.</p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="OpenIAP" term="OpenIAP"/>
        <category label="iOS" term="iOS"/>
        <category label="Android" term="Android"/>
        <category label="Tooling" term="Tooling"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[3.0.0 — OpenIAP Integration, Unified Core, Leaner API]]></title>
        <id>https://hyochan.github.io/expo-iap/blog/3.0.0</id>
        <link href="https://hyochan.github.io/expo-iap/blog/3.0.0"/>
        <updated>2025-09-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Expo IAP 3.0.0 is a major release that fully integrates OpenIAP’s Android and iOS modules. Expo IAP is no longer just a framework bridge — it now leverages a centralized OpenIAP core for shared logic across platforms and SDKs. The result is a leaner, more maintainable codebase with faster iteration and greater stability.]]></summary>
        <content type="html"><![CDATA[<p>Expo IAP 3.0.0 is a major release that fully integrates <a href="https://openiap.dev/" target="_blank" rel="noopener noreferrer">OpenIAP</a>’s Android and iOS modules. Expo IAP is no longer just a framework bridge — it now leverages a centralized <a href="https://openiap.dev/" target="_blank" rel="noopener noreferrer">OpenIAP</a> core for shared logic across platforms and SDKs. The result is a leaner, more maintainable codebase with faster iteration and greater stability.</p>
<!-- -->
<div style="flex:1;margin-top:24px;margin-bottom:24px"><div class="adfit-top"></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-highlights">🚀 Highlights<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#-highlights" class="hash-link" aria-label="Direct link to 🚀 Highlights" title="Direct link to 🚀 Highlights">​</a></h2>
<ul>
<li>Unified tokens: <code>Purchase.purchaseToken</code> is now the single source on both platforms (iOS JWS or Android token). The old <code>jwsRepresentationIOS</code> is removed.</li>
<li>Leaner API: Legacy helpers are removed. Use <code>fetchProducts</code>, <code>requestPurchase</code>, <code>getAvailablePurchases</code>, and listeners.</li>
<li>iOS parity: Only <code>*IOS</code> helpers remain for iOS‑specific behavior. <code>showManageSubscriptionsIOS()</code> now returns an array of purchases instead of a boolean.</li>
<li>Stronger types: Consolidated product/purchase types; removed legacy aliases and fields for clarity.</li>
<li>OpenIAP everywhere: Android uses openiap-google and iOS uses openiap-apple. Shared, centralized logic simplifies maintenance and keeps frameworks in sync.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-key-changes">🔍 Key Changes<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#-key-changes" class="hash-link" aria-label="Direct link to 🔍 Key Changes" title="Direct link to 🔍 Key Changes">​</a></h2>
<p>✅ Full Integration Across Client Platforms (Android · iOS) Platform‑specific IAP logic has been unified into OpenIAP modules, minimizing fragmentation across ecosystems.</p>
<p>✅ Lean Codebase (~75% reduction) Overall code size has been significantly reduced, lowering complexity and maintenance costs.</p>
<p>✅ Centralized Core Architecture Common logic lives in the core library, enabling consistent behavior and faster feature expansion across frameworks.</p>
<p>✅ Improved Stability &amp; Maintainability Bug fixes and features land once in the core, eliminating duplication and improving reliability.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-breaking-changes">💥 Breaking Changes<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#-breaking-changes" class="hash-link" aria-label="Direct link to 💥 Breaking Changes" title="Direct link to 💥 Breaking Changes">​</a></h2>
<ul>
<li>
<p>Removed fields</p>
<ul>
<li>Removed <code>transactionReceipt</code> (use <code>purchaseToken</code> on all platforms). On iOS, <code>purchaseToken</code> contains the JWS representation previously accessed via receipts.</li>
<li>Removed <code>jwsRepresentationIOS</code> in favor of the unified <code>purchaseToken</code>.</li>
</ul>
</li>
<li>
<p>Removed functions</p>
<ul>
<li><code>getProducts</code>, <code>getSubscriptions</code>, <code>requestProducts</code>, <code>requestSubscription</code></li>
<li><code>getPurchaseHistory</code> / <code>getPurchaseHistories</code></li>
<li>Non‑suffixed iOS aliases (use <code>*IOS</code> variants)</li>
</ul>
</li>
<li>
<p>Changed behavior</p>
<ul>
<li><code>showManageSubscriptionsIOS(): Promise&lt;Purchase[]&gt;</code> — now returns purchases instead of <code>boolean</code>.</li>
<li><code>getAvailablePurchases</code> options: only accepts <code>alsoPublishToEventListenerIOS</code> and <code>onlyIncludeActiveItemsIOS</code>.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-recent-patch-releases-v29x">📋 Recent Patch Releases (v2.9.x)<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#-recent-patch-releases-v29x" class="hash-link" aria-label="Direct link to 📋 Recent Patch Releases (v2.9.x)" title="Direct link to 📋 Recent Patch Releases (v2.9.x)">​</a></h2>
<p>Before the major 3.0.0 release, several patch versions improved stability and fixed issues:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="v297--androidios-improvements-and-subscription-offer-tokens">v2.9.7 — Android/iOS improvements and subscription offer tokens<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#v297--androidios-improvements-and-subscription-offer-tokens" class="hash-link" aria-label="Direct link to v2.9.7 — Android/iOS improvements and subscription offer tokens" title="Direct link to v2.9.7 — Android/iOS improvements and subscription offer tokens">​</a></h3>
<ul>
<li>Android: Removed ensureConnection wrapper, added pre-checks, and dropped deprecated product fields (use <code>nameAndroid</code>, <code>oneTimePurchaseOfferDetailsAndroid</code>, <code>subscriptionOfferDetailsAndroid</code>).</li>
<li>iOS: Added ensureConnection() guard across public APIs; fixed main-actor state mutation and minor warnings.</li>
<li><strong>Heads-up for Android subscriptions</strong>: When purchasing subscriptions, pass selected offer tokens via <code>subscriptionOffers</code> to build BillingFlowParams correctly. Example provided in the original release notes.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="v296--metro-bundling-fix">v2.9.6 — Metro bundling fix<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#v296--metro-bundling-fix" class="hash-link" aria-label="Direct link to v2.9.6 — Metro bundling fix" title="Direct link to v2.9.6 — Metro bundling fix">​</a></h3>
<ul>
<li>Fixed Metro bundling issue that could crash apps when using <code>useIAP()</code> under certain project setups.</li>
<li>Replaced ambiguous import '.' with explicit import './index' in the hook implementation.</li>
<li>No runtime behavior changes — strictly fixes bundling resolution.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="v295--pin-openiap-and-deprecate-290294">v2.9.5 — Pin openiap and deprecate 2.9.0–2.9.4<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#v295--pin-openiap-and-deprecate-290294" class="hash-link" aria-label="Direct link to v2.9.5 — Pin openiap and deprecate 2.9.0–2.9.4" title="Direct link to v2.9.5 — Pin openiap and deprecate 2.9.0–2.9.4">​</a></h3>
<ul>
<li>iOS: Podspec now pins openiap to 1.1.9 to avoid version drift during pod install.</li>
<li>Deprecated 2.9.0–2.9.4. Please upgrade to 2.9.5.</li>
<li>Upgrade notes: Run <code>npx expo prebuild -p ios</code> and <code>pod install</code> after updating.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="v293--ios-error-fixes-and-cocoapods-hardening">v2.9.3 — iOS error fixes and CocoaPods hardening<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#v293--ios-error-fixes-and-cocoapods-hardening" class="hash-link" aria-label="Direct link to v2.9.3 — iOS error fixes and CocoaPods hardening" title="Direct link to v2.9.3 — iOS error fixes and CocoaPods hardening">​</a></h3>
<ul>
<li>iOS: Replaced thrown OpenIapError.* usages and nonexistent event types with proper OpenIapFailure cases.</li>
<li>iOS: Relied on type inference for error event listener to avoid missing type symbols.</li>
<li>Plugin(iOS): Ensured Podfile includes GitHub Specs before CDN and added stability envs to reduce CDN HTTP/2 flakiness.</li>
<li>Plugin(iOS): Applied the same improvements when injecting a local openiap pod for development.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="v291--ios-fixes-and-error-improvements">v2.9.1 — iOS fixes and error improvements<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#v291--ios-fixes-and-error-improvements" class="hash-link" aria-label="Direct link to v2.9.1 — iOS fixes and error improvements" title="Direct link to v2.9.1 — iOS fixes and error improvements">​</a></h3>
<ul>
<li>iOS: <code>getPromotedProductIOS</code> now returns a full serialized Product; <code>subscriptionStatusIOS</code> returns <code>{ state, renewalInfo? }</code> with a real boolean <code>willAutoRenew</code>.</li>
<li>Errors: Expanded codes + friendlier messages; support object-style <code>new PurchaseError({ ... })</code> (positional args still work).</li>
<li>Docs: Docusaurus supports GitHub Pages via dynamic baseUrl; added conventions for PurchaseError construction.</li>
<li>Example iOS: Pinned openiap to 1.1.7 from git to avoid trunk lag.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quick-migration">Quick Migration<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#quick-migration" class="hash-link" aria-label="Direct link to Quick Migration" title="Direct link to Quick Migration">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fetch-products-inapp-or-subs">Fetch products (in‑app or subs)<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#fetch-products-inapp-or-subs" class="hash-link" aria-label="Direct link to Fetch products (in‑app or subs)" title="Direct link to Fetch products (in‑app or subs)">​</a></h3>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">fetchProducts</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">ProductSubscription</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> inapps </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'prod1'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'prod2'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'in-app'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> subs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetchProducts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'sub_monthly'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'subs'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> ProductSubscription</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="request-purchase-products-or-subs">Request purchase (products or subs)<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#request-purchase-products-or-subs" class="hash-link" aria-label="Direct link to Request purchase (products or subs)" title="Direct link to Request purchase (products or subs)">​</a></h3>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">requestPurchase</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// In‑app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'prod1'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'prod1'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'in-app'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Subscriptions (Android supply offer tokens)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'sub_monthly'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'sub_monthly'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      subscriptionOffers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'sub_monthly'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> offerToken</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'your-offer-token'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'subs'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="restoreavailable-purchases">Restore/available purchases<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#restoreavailable-purchases" class="hash-link" aria-label="Direct link to Restore/available purchases" title="Direct link to Restore/available purchases">​</a></h3>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">getAvailablePurchases</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> restorePurchases</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// iOS‑specific flags only</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> purchases </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAvailablePurchases</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alsoPublishToEventListenerIOS</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  onlyIncludeActiveItemsIOS</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Cross‑platform helper that syncs on iOS then lists</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> restored </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">restorePurchases</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  alsoPublishToEventListenerIOS</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  onlyIncludeActiveItemsIOS</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tokens-and-finishing-transactions">Tokens and finishing transactions<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#tokens-and-finishing-transactions" class="hash-link" aria-label="Direct link to Tokens and finishing transactions" title="Direct link to Tokens and finishing transactions">​</a></h3>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">finishTransaction</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Purchase</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getToken</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Purchase</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">purchaseToken</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// iOS: JWS, Android: purchaseToken</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">finishTransaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">purchase</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> somePurchase</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isConsumable</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="notes">Notes<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#notes" class="hash-link" aria-label="Direct link to Notes" title="Direct link to Notes">​</a></h2>
<ul>
<li>iOS promoted products listener remains <code>promotedProductListenerIOS</code>.</li>
<li><code>getStorefront()</code> is now the unified storefront helper across platforms.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="changelog">Changelog<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#changelog" class="hash-link" aria-label="Direct link to Changelog" title="Direct link to Changelog">​</a></h2>
<p>See <code>CHANGELOG.md</code> for the full list of changes in 3.0.0.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-repositories-to-explore">🔗 Repositories to Explore<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#-repositories-to-explore" class="hash-link" aria-label="Direct link to 🔗 Repositories to Explore" title="Direct link to 🔗 Repositories to Explore">​</a></h2>
<ul>
<li><a href="https://github.com/hyodotdev/openiap-apple" target="_blank" rel="noopener noreferrer">openiap-apple</a> (iOS)</li>
<li><a href="https://github.com/hyodotdev/openiap-google" target="_blank" rel="noopener noreferrer">openiap-google</a> (Android)</li>
</ul>
<p>The OpenIAP core library is where the shared logic and architecture live — the foundation for review, extensibility, and cross‑SDK consistency.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-why-this-matters">🌟 Why This Matters<a href="https://hyochan.github.io/expo-iap/blog/3.0.0#-why-this-matters" class="hash-link" aria-label="Direct link to 🌟 Why This Matters" title="Direct link to 🌟 Why This Matters">​</a></h2>
<ul>
<li>Standardizes the IAP experience across frameworks, improving trust for both developers and users</li>
<li>Speeds up responses to platform‑specific issues (fix once at the core)</li>
<li>Reduces risk and shortens release cycles via a smaller codebase and broader test coverage</li>
</ul>
<p>Follow for faster updates: <a href="https://x.com/hyodotdev" target="_blank" rel="noopener noreferrer">@hyodotdev</a></p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="Breaking Change" term="Breaking Change"/>
        <category label="Android" term="Android"/>
        <category label="iOS" term="iOS"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[2.9.0 - OpenIAP Apple Integration]]></title>
        <id>https://hyochan.github.io/expo-iap/blog/2.9.0</id>
        <link href="https://hyochan.github.io/expo-iap/blog/2.9.0"/>
        <updated>2025-09-05T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We're excited to announce 2.9.0, featuring full integration with OpenIAP Apple that reduces our Swift codebase by ~1,180 lines (73% reduction)!]]></summary>
        <content type="html"><![CDATA[<p>We're excited to announce 2.9.0, featuring full integration with OpenIAP Apple that reduces our Swift codebase by <strong>~1,180 lines (73% reduction)</strong>!</p>
<!-- -->
<div style="flex:1;margin-top:24px;margin-bottom:24px"><div class="adfit-top"></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-openiap-apple-integration">🎯 OpenIAP Apple Integration<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#-openiap-apple-integration" class="hash-link" aria-label="Direct link to 🎯 OpenIAP Apple Integration" title="Direct link to 🎯 OpenIAP Apple Integration">​</a></h2>
<p>The core achievement of this release is integrating <a href="https://github.com/hyodotdev/openiap-apple" target="_blank" rel="noopener noreferrer">OpenIAP Apple</a> v1.1.5 as our iOS native module.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="code-reduction-impact">Code Reduction Impact<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#code-reduction-impact" class="hash-link" aria-label="Direct link to Code Reduction Impact" title="Direct link to Code Reduction Impact">​</a></h3>
<ul>
<li><strong>Before</strong>: 1,620 lines of Swift code</li>
<li><strong>After</strong>: 440 lines of Swift code</li>
<li><strong>Reduction</strong>: ~1,180 lines (73% less code to maintain!)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-architecture-evolution">🏗️ Architecture Evolution<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#%EF%B8%8F-architecture-evolution" class="hash-link" aria-label="Direct link to 🏗️ Architecture Evolution" title="Direct link to 🏗️ Architecture Evolution">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="before-28x">Before (2.8.x)<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#before-28x" class="hash-link" aria-label="Direct link to Before (2.8.x)" title="Direct link to Before (2.8.x)">​</a></h3>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Expo IAP → Custom Swift Implementation → StoreKit 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         (1,620 lines of complex logic)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="after-290">After (2.9.0)<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#after-290" class="hash-link" aria-label="Direct link to After (2.9.0)" title="Direct link to After (2.9.0)">​</a></h3>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Expo IAP → OpenIAP Apple → StoreKit 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         (440 lines)    (Specialized native module)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-whats-new">✨ What's New<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#-whats-new" class="hash-link" aria-label="Direct link to ✨ What's New" title="Direct link to ✨ What's New">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enhanced-type-system">Enhanced Type System<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#enhanced-type-system" class="hash-link" aria-label="Direct link to Enhanced Type System" title="Direct link to Enhanced Type System">​</a></h3>
<p>Following <a href="https://www.openiap.dev/docs/versions#v1-1-0" target="_blank" rel="noopener noreferrer">OpenIAP v1.1.0 specification</a>:</p>
<ul>
<li><code>ProductRequest</code> for product fetching</li>
<li><code>RequestPurchaseProps</code> for purchase requests</li>
<li><code>ReceiptValidationProps</code> for receipt validation</li>
<li><code>PurchaseError</code> with native error code mapping</li>
<li>No more deep imports: <code>ProductAndroid</code>, <code>ProductIOS</code>, <code>PaymentDiscount</code> and other types are exported from <code>expo-iap</code> root</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="thread-safety">Thread Safety<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#thread-safety" class="hash-link" aria-label="Direct link to Thread Safety" title="Direct link to Thread Safety">​</a></h3>
<ul>
<li>All iOS operations now use <code>@MainActor</code> annotation</li>
<li>Prevents race conditions and ensures main thread execution</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="unified-event-system">Unified Event System<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#unified-event-system" class="hash-link" aria-label="Direct link to Unified Event System" title="Direct link to Unified Event System">​</a></h3>
<ul>
<li>Renamed <code>IapEvent</code> to <code>OpenIapEvent</code></li>
<li>Streamlined listeners: <code>purchaseUpdatedListener</code>, <code>purchaseErrorListener</code></li>
<li>Added <code>removeAllListeners()</code> for cleanup</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-bug-fixes">🐛 Bug Fixes<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#-bug-fixes" class="hash-link" aria-label="Direct link to 🐛 Bug Fixes" title="Direct link to 🐛 Bug Fixes">​</a></h2>
<ul>
<li>Fixed duplicate purchase success alerts</li>
<li>Resolved restore purchase alerts on screen entry</li>
<li>Improved purchase validation logic</li>
<li>Enhanced subscription status refresh timing</li>
<li>Better deduplication of purchases by productId</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-breaking-changes">💔 Breaking Changes<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#-breaking-changes" class="hash-link" aria-label="Direct link to 💔 Breaking Changes" title="Direct link to 💔 Breaking Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="iapevent--openiapevent">IapEvent → OpenIapEvent<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#iapevent--openiapevent" class="hash-link" aria-label="Direct link to IapEvent → OpenIapEvent" title="Direct link to IapEvent → OpenIapEvent">​</a></h3>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ❌ Old</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">OpenIapEvent</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">purchaseUpdatedListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> OpenIapEvent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PurchaseUpdated</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ✅ New</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">OpenIapEvent</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">purchaseUpdatedListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> OpenIapEvent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PurchaseUpdated</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-looking-ahead-300">🚀 Looking Ahead: 3.0.0<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#-looking-ahead-300" class="hash-link" aria-label="Direct link to 🚀 Looking Ahead: 3.0.0" title="Direct link to 🚀 Looking Ahead: 3.0.0">​</a></h2>
<p>This release sets the foundation for 3.0.0:</p>
<ul>
<li><strong>Android</strong>: OpenIAP Android integration (Google Play Billing)</li>
<li><strong>Bundle Size</strong>: Further optimizations through shared native libraries</li>
<li><strong>Maintenance</strong>: Unified native module architecture</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-benefits">💡 Benefits<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#-benefits" class="hash-link" aria-label="Direct link to 💡 Benefits" title="Direct link to 💡 Benefits">​</a></h2>
<ol>
<li><strong>Reliability</strong>: Battle-tested native modules reduce edge cases</li>
<li><strong>Maintainability</strong>: 73% less code in Expo IAP layer</li>
<li><strong>Performance</strong>: Optimized native implementations</li>
<li><strong>Future-proof</strong>: Easier platform updates</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-installation">📦 Installation<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#-installation" class="hash-link" aria-label="Direct link to 📦 Installation" title="Direct link to 📦 Installation">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install expo-iap@2.9.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn add expo-iap@2.9.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bun add expo-iap@2.9.0</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-full-changelog">📋 Full Changelog<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#-full-changelog" class="hash-link" aria-label="Direct link to 📋 Full Changelog" title="Direct link to 📋 Full Changelog">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="added">Added<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#added" class="hash-link" aria-label="Direct link to Added" title="Direct link to Added">​</a></h3>
<ul>
<li><strong>iOS</strong>: Integrated OpenIAP Apple v1.1.6</li>
<li>Updated types to match OpenIAP v1.1.0 specification</li>
<li>Enhanced error handling with <code>PurchaseError</code> type</li>
<li>New type system: <code>ProductRequest</code>, <code>RequestPurchaseProps</code>, <code>ReceiptValidationProps</code></li>
<li>Improved receipt validation with <code>ReceiptValidationResult</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="changed">Changed<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#changed" class="hash-link" aria-label="Direct link to Changed" title="Direct link to Changed">​</a></h3>
<ul>
<li>Updated <code>serializePurchase</code> and <code>serializeProduct</code> for new OpenIAP structure</li>
<li>Updated listener setup to use new OpenIAP methods</li>
<li>Renamed <code>IapEvent</code> to <code>OpenIapEvent</code> across entire codebase</li>
<li>Added unified <code>removeAllListeners()</code> for cleanup</li>
<li>Avoid deep imports: import public types directly from <code>expo-iap</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fixed">Fixed<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#fixed" class="hash-link" aria-label="Direct link to Fixed" title="Direct link to Fixed">​</a></h3>
<ul>
<li>Fixed duplicate purchase success alerts</li>
<li>Fixed restore purchase alerts on screen entry</li>
<li>Improved purchase validation logic</li>
<li>Enhanced subscription deduplication</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="note">Note<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#note" class="hash-link" aria-label="Direct link to Note" title="Direct link to Note">​</a></h3>
<ul>
<li>Android native module integration with OpenIAP Android planned for 3.0.0</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-acknowledgments">🙏 Acknowledgments<a href="https://hyochan.github.io/expo-iap/blog/2.9.0#-acknowledgments" class="hash-link" aria-label="Direct link to 🙏 Acknowledgments" title="Direct link to 🙏 Acknowledgments">​</a></h2>
<p>Special thanks to the <a href="https://www.openiap.dev/" target="_blank" rel="noopener noreferrer">OpenIAP</a> project for providing standardized, high-quality native modules.</p>
<p>For detailed changes, see <a href="https://github.com/hyochan/expo-iap/pull/184" target="_blank" rel="noopener noreferrer">PR #184</a>.</p>
<p>Questions? Visit <a href="https://github.com/hyochan/expo-iap/issues" target="_blank" rel="noopener noreferrer">GitHub Issues</a>!</p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="OpenIAP" term="OpenIAP"/>
        <category label="iOS" term="iOS"/>
        <category label="Architecture" term="Architecture"/>
        <category label="Performance" term="Performance"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[2.8.0 Migration Guide - iOS Field Naming Convention Update]]></title>
        <id>https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide</id>
        <link href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide"/>
        <updated>2025-08-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Breaking Changes]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes">Breaking Changes<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#breaking-changes" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h2>
<p>Version 2.8.0 introduces naming convention changes:</p>
<ol>
<li><strong>iOS suffix convention</strong>: Fields with iOS suffixes now use uppercase <code>IOS</code> instead of <code>Ios</code></li>
<li><strong>ID suffix convention</strong>: All fields ending with <code>ID</code> now use <code>Id</code> instead for consistency (e.g., <code>subscriptionGroupID</code> → <code>subscriptionGroupId</code>, <code>bundleID</code> → <code>bundleId</code>)</li>
</ol>
<p><strong>Note:</strong> Android field names remain unchanged as they already follow the correct convention (e.g., <code>autoRenewingAndroid</code>, <code>purchaseTokenAndroid</code>).</p>
<!-- -->
<div style="flex:1;margin-top:24px;margin-bottom:24px"><div class="adfit-top"></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-changed">What Changed<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#what-changed" class="hash-link" aria-label="Direct link to What Changed" title="Direct link to What Changed">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ios-changes">iOS Changes<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#ios-changes" class="hash-link" aria-label="Direct link to iOS Changes" title="Direct link to iOS Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="product-types">Product Types<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#product-types" class="hash-link" aria-label="Direct link to Product Types" title="Direct link to Product Types">​</a></h3>
<p><strong>ProductIOS &amp; ProductSubscriptionIOS:</strong></p>
<ul>
<li><code>displayName</code> - Product display name</li>
<li><code>isFamilyShareable</code> - Family sharing availability</li>
<li><code>jsonRepresentation</code> - JSON representation of product</li>
<li><code>introductoryPriceNumberOfPeriodsIOS</code> - Introductory price period count</li>
<li><code>introductoryPriceSubscriptionPeriodIOS</code> - Introductory price period</li>
<li><code>introductoryPriceAsAmountIOS</code> - Introductory price amount</li>
<li><code>introductoryPricePaymentModeIOS</code> - Introductory price payment mode</li>
<li><code>subscriptionPeriodNumberIOS</code> - Subscription period number</li>
<li><code>subscriptionPeriodUnitIOS</code> - Subscription period unit</li>
</ul>
<p><strong>SubscriptionInfo:</strong></p>
<ul>
<li><code>subscriptionGroupId</code> - Subscription group identifier (changed from <code>subscriptionGroupID</code>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="purchase-types">Purchase Types<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#purchase-types" class="hash-link" aria-label="Direct link to Purchase Types" title="Direct link to Purchase Types">​</a></h3>
<p><strong>ProductPurchaseIOS</strong> includes these StoreKit 2 fields:</p>
<ul>
<li><code>quantityIOS</code>, <code>originalTransactionDateIOS</code>, <code>originalTransactionIdentifierIOS</code></li>
<li><code>expirationDateIOS</code>, <code>webOrderLineItemIdIOS</code>, <code>environmentIOS</code></li>
<li><code>storefrontCountryCodeIOS</code>, <code>appBundleIdIOS</code>, <code>productTypeIOS</code></li>
<li><code>subscriptionGroupIdIOS</code>, <code>isUpgradedIOS</code>, <code>ownershipTypeIOS</code></li>
<li><code>reasonIOS</code>, <code>reasonStringRepresentationIOS</code>, <code>transactionReasonIOS</code></li>
<li><code>revocationDateIOS</code>, <code>revocationReasonIOS</code>, <code>offerIOS</code></li>
<li><code>priceIOS</code>, <code>currencyIOS</code>, <code>jwsRepresentationIOS</code> (deprecated)</li>
</ul>
<p><strong>AppTransactionIOS</strong> (iOS 16.0+):</p>
<ul>
<li><code>appTransactionId</code> - App transaction identifier (changed from <code>appTransactionID</code>)</li>
<li><code>bundleId</code> - Bundle identifier (changed from <code>bundleID</code>)</li>
<li><code>appId</code> - App identifier (changed from <code>appID</code>)</li>
<li><code>appVersionId</code> - App version identifier (changed from <code>appVersionID</code>)</li>
</ul>
<p><strong>Breaking Changes - Field Renaming:</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ios-suffix-changes-ios--ios">iOS Suffix Changes (Ios → IOS)<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#ios-suffix-changes-ios--ios" class="hash-link" aria-label="Direct link to iOS Suffix Changes (Ios → IOS)" title="Direct link to iOS Suffix Changes (Ios → IOS)">​</a></h3>
<table><thead><tr><th>Old Field Name</th><th>New Field Name</th></tr></thead><tbody><tr><td><code>quantityIos</code></td><td><code>quantityIOS</code></td></tr><tr><td><code>originalTransactionDateIos</code></td><td><code>originalTransactionDateIOS</code></td></tr><tr><td><code>originalTransactionIdentifierIos</code></td><td><code>originalTransactionIdentifierIOS</code></td></tr><tr><td><code>appBundleIdIos</code></td><td><code>appBundleIdIOS</code></td></tr><tr><td><code>productTypeIos</code></td><td><code>productTypeIOS</code></td></tr><tr><td><code>subscriptionGroupIdIos</code></td><td><code>subscriptionGroupIdIOS</code></td></tr><tr><td><code>webOrderLineItemIdIos</code></td><td><code>webOrderLineItemIdIOS</code></td></tr><tr><td><code>expirationDateIos</code></td><td><code>expirationDateIOS</code></td></tr><tr><td><code>isUpgradedIos</code></td><td><code>isUpgradedIOS</code></td></tr><tr><td><code>ownershipTypeIos</code></td><td><code>ownershipTypeIOS</code></td></tr><tr><td><code>revocationDateIos</code></td><td><code>revocationDateIOS</code></td></tr><tr><td><code>revocationReasonIos</code></td><td><code>revocationReasonIOS</code></td></tr><tr><td><code>transactionReasonIos</code></td><td><code>transactionReasonIOS</code></td></tr><tr><td><code>environmentIos</code></td><td><code>environmentIOS</code></td></tr><tr><td><code>storefrontCountryCodeIos</code></td><td><code>storefrontCountryCodeIOS</code></td></tr><tr><td><code>reasonIos</code></td><td><code>reasonIOS</code></td></tr><tr><td><code>offerIos</code></td><td><code>offerIOS</code></td></tr><tr><td><code>priceIos</code></td><td><code>priceIOS</code></td></tr><tr><td><code>currencyIos</code></td><td><code>currencyIOS</code></td></tr><tr><td><code>jwsRepresentationIos</code></td><td><code>jwsRepresentationIOS</code></td></tr><tr><td><code>reasonStringRepresentationIos</code></td><td><code>reasonStringRepresentationIOS</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-suffix-changes-id--id">ID Suffix Changes (ID → Id)<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#id-suffix-changes-id--id" class="hash-link" aria-label="Direct link to ID Suffix Changes (ID → Id)" title="Direct link to ID Suffix Changes (ID → Id)">​</a></h3>
<table><thead><tr><th>Old Field Name</th><th>New Field Name</th><th>Type/Context</th></tr></thead><tbody><tr><td><code>subscriptionGroupID</code></td><td><code>subscriptionGroupId</code></td><td>SubscriptionInfo</td></tr><tr><td><code>appTransactionID</code></td><td><code>appTransactionId</code></td><td>AppTransactionIOS</td></tr><tr><td><code>bundleID</code></td><td><code>bundleId</code></td><td>AppTransactionIOS</td></tr><tr><td><code>appID</code></td><td><code>appId</code></td><td>AppTransactionIOS</td></tr><tr><td><code>appVersionID</code></td><td><code>appVersionId</code></td><td>AppTransactionIOS</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="function-parameter-changes">Function Parameter Changes<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#function-parameter-changes" class="hash-link" aria-label="Direct link to Function Parameter Changes" title="Direct link to Function Parameter Changes">​</a></h3>
<table><thead><tr><th>Function</th><th>Old Parameter</th><th>New Parameter</th></tr></thead><tbody><tr><td><code>isEligibleForIntroOfferIOS</code></td><td><code>groupID</code></td><td><code>groupId</code></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="android-changes">Android Changes<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#android-changes" class="hash-link" aria-label="Direct link to Android Changes" title="Direct link to Android Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="product-types-1">Product Types<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#product-types-1" class="hash-link" aria-label="Direct link to Product Types" title="Direct link to Product Types">​</a></h3>
<p><strong>ProductAndroid &amp; ProductSubscriptionAndroid:</strong></p>
<ul>
<li><code>name</code> - Product display name</li>
<li><code>oneTimePurchaseOfferDetails</code> - One-time purchase offer details</li>
<li><code>subscriptionOfferDetails</code> - Subscription offer details array</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="purchase-types-1">Purchase Types<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#purchase-types-1" class="hash-link" aria-label="Direct link to Purchase Types" title="Direct link to Purchase Types">​</a></h3>
<p><strong>ProductPurchaseAndroid</strong> includes these Android Billing Library fields:</p>
<ul>
<li><code>ids</code> - Array of product IDs</li>
<li><code>purchaseTokenAndroid</code> - Android purchase token (deprecated, use <code>purchaseToken</code>)</li>
<li><code>dataAndroid</code> - Purchase data</li>
<li><code>signatureAndroid</code> - Purchase signature</li>
<li><code>autoRenewingAndroid</code> - Auto-renewal status</li>
<li><code>purchaseStateAndroid</code> - Purchase state enum</li>
<li><code>isAcknowledgedAndroid</code> - Acknowledgment status</li>
<li><code>packageNameAndroid</code> - App package name</li>
<li><code>developerPayloadAndroid</code> - Developer payload</li>
<li><code>obfuscatedAccountIdAndroid</code> - Obfuscated account ID</li>
<li><code>obfuscatedProfileIdAndroid</code> - Obfuscated profile ID</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="request-props">Request Props<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#request-props" class="hash-link" aria-label="Direct link to Request Props" title="Direct link to Request Props">​</a></h3>
<p><strong>RequestPurchaseAndroidProps:</strong></p>
<ul>
<li><code>isOfferPersonalized</code> - For Android Billing V5 personalized pricing</li>
</ul>
<p><strong>No Breaking Changes</strong> - All Android fields maintain existing naming convention.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-migrate">How to Migrate<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#how-to-migrate" class="hash-link" aria-label="Direct link to How to Migrate" title="Direct link to How to Migrate">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-update-field-references">Step 1: Update Field References<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#step-1-update-field-references" class="hash-link" aria-label="Direct link to Step 1: Update Field References" title="Direct link to Step 1: Update Field References">​</a></h3>
<p>Search your codebase for any references to the old field names and update them:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before (2.7.x)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> purchase </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'product-id'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">expirationDateIos</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Expires:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">expirationDateIos</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After (2.8.0)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Note: requestPurchase API signature has also changed in 2.8.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> purchase </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'product-id'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'product-id'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'in-app'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">expirationDateIOS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Expires:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">expirationDateIOS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-and-operational-notes">Bug Fixes and Operational Notes<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#bug-fixes-and-operational-notes" class="hash-link" aria-label="Direct link to Bug Fixes and Operational Notes" title="Direct link to Bug Fixes and Operational Notes">​</a></h2>
<ul>
<li><strong>iOS Hot Reload Fix (2.7.7)</strong>: This version addresses critical failures during React Native's fast refresh on iOS, which could leave StoreKit in an inconsistent state. Previously, concurrent operations like <code>Promise.all([fetchProducts(...), getAvailablePurchases()])</code> would fail during hot reloads. The native module now cleans up its state during <code>initConnection()</code>, validates connections with <code>ensureConnection()</code> across all public APIs (similar to Android), and properly manages StoreKit resources. No code changes are needed to benefit from this fix, but <code>expo-iap@2.7.7+</code> is required.</li>
<li>Metro bundling resolution (2.9.6): Fixed an ambiguous import in the hook implementation that could cause Metro to attempt to resolve <code>../../..</code> and crash. The import now explicitly targets <code>./index</code>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="v273-release--google-play-billing-library-v800-support">v2.7.3 Release — Google Play Billing Library v8.0.0 Support<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#v273-release--google-play-billing-library-v800-support" class="hash-link" aria-label="Direct link to v2.7.3 Release — Google Play Billing Library v8.0.0 Support" title="Direct link to v2.7.3 Release — Google Play Billing Library v8.0.0 Support">​</a></h2>
<p>We shipped v2.7.3 to add full support for Google Play Billing Library v8.0.0. This ensures compatibility with the latest Android billing features and improves error diagnostics.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="whats-new">What's New<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#whats-new" class="hash-link" aria-label="Direct link to What's New" title="Direct link to What's New">​</a></h3>
<ul>
<li>Upgraded Google Play Billing from v7.0.0 to v8.0.0</li>
<li>Enhanced error handling with sub-response codes for better debugging</li>
<li>API compatibility updates for new callback signatures</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-changes">Key Changes<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#key-changes" class="hash-link" aria-label="Direct link to Key Changes" title="Direct link to Key Changes">​</a></h3>
<ul>
<li>Updated <code>queryProductDetailsAsync</code> callback to use <code>QueryProductDetailsResult</code></li>
<li>Improved <code>enablePendingPurchases</code> configuration</li>
<li>Removed deprecated, hardcoded Kotlin version constraints</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes-1">Breaking Changes<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#breaking-changes-1" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h3>
<p>Android Kotlin version requirement: Play Billing v8.0.0 requires Kotlin 2.0+. Because <code>expo-modules-core</code> did not yet support Kotlin v2 at the time, you must set Kotlin 2.0.21 explicitly via <code>expo-build-properties</code>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"expo"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"plugins"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"expo-build-properties"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"android"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"kotlinVersion"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2.0.21"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h3>
<p>If you're upgrading to v2.7.3:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npx expo install expo-iap@2.7.3</span><br></span></code></pre></div></div>
<p>Don't forget to add the <code>expo-build-properties</code> configuration to your app.json if you haven't already.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-update-type-imports-and-declarations">Step 2: Update Type Imports and Declarations<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#step-2-update-type-imports-and-declarations" class="hash-link" aria-label="Direct link to Step 2: Update Type Imports and Declarations" title="Direct link to Step 2: Update Type Imports and Declarations">​</a></h3>
<p>Type names have also been updated to use uppercase <code>IOS</code>:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before (2.7.x)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProductIOS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProductPurchaseIos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProductSubscriptionIOS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProductStatusIos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After (2.8.0)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProductIOS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProductPurchaseIOS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProductSubscriptionIOS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ProductStatusIOS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><strong>Note:</strong> The old type names are still available as deprecated aliases for backward compatibility, but we recommend updating to the new names.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-update-type-checks">Step 3: Update Type Checks<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#step-3-update-type-checks" class="hash-link" aria-label="Direct link to Step 3: Update Type Checks" title="Direct link to Step 3: Update Type Checks">​</a></h3>
<p>If you're using TypeScript and checking for iOS-specific fields:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before (2.7.x)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'expirationDateIos'</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Handle subscription</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After (2.8.0)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'expirationDateIOS'</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Handle subscription</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-update-id-field-references">Step 4: Update ID Field References<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#step-4-update-id-field-references" class="hash-link" aria-label="Direct link to Step 4: Update ID Field References" title="Direct link to Step 4: Update ID Field References">​</a></h3>
<p>Update all ID field references to use <code>Id</code> instead:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before (2.7.x)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> appTransaction </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAppTransactionIOS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bundleID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">appID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After (2.8.0)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> appTransaction </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAppTransactionIOS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bundleId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">appId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-update-subscription-helpers">Step 5: Update Subscription Helpers<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#step-5-update-subscription-helpers" class="hash-link" aria-label="Direct link to Step 5: Update Subscription Helpers" title="Direct link to Step 5: Update Subscription Helpers">​</a></h3>
<p>If you're using the subscription helper functions:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before (2.7.x)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> subscription </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  expirationDateIos</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">expirationDateIos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  environmentIos</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">environmentIos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After (2.8.0)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> subscription </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  expirationDateIOS</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">expirationDateIOS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  environmentIOS</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> purchase</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">environmentIOS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quick-migration-script">Quick Migration Script<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#quick-migration-script" class="hash-link" aria-label="Direct link to Quick Migration Script" title="Direct link to Quick Migration Script">​</a></h2>
<p>You can use this regex find/replace pattern in your IDE to quickly update most occurrences:</p>
<p><strong>Find Pattern (Regex):</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">\b(\w+)(Ios)\b</span><br></span></code></pre></div></div>
<p><strong>Replace Pattern:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$1IOS</span><br></span></code></pre></div></div>
<p>⚠️ <strong>Note:</strong> Review each replacement carefully as this might affect non-field references.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-this-change">Why This Change?<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#why-this-change" class="hash-link" aria-label="Direct link to Why This Change?" title="Direct link to Why This Change?">​</a></h2>
<p>These changes align with widely-adopted naming conventions:</p>
<ol>
<li><strong>iOS suffix</strong>: Acronyms at the end of identifiers are written in uppercase (e.g., <code>dataIOS</code>, <code>configIOS</code>)</li>
<li><strong>ID suffix</strong>: The <code>Id</code> convention is more common in modern JavaScript/TypeScript codebases (e.g., <code>userId</code>, <code>productId</code>, <code>transactionId</code>)</li>
</ol>
<p>This makes the codebase more consistent and follows best practices in the TypeScript/JavaScript ecosystem.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="need-help">Need Help?<a href="https://hyochan.github.io/expo-iap/blog/2.8.0-migration-guide#need-help" class="hash-link" aria-label="Direct link to Need Help?" title="Direct link to Need Help?">​</a></h2>
<p>If you encounter any issues during migration:</p>
<ul>
<li>Check our <a href="https://github.com/hyochan/expo-iap/issues" target="_blank" rel="noopener noreferrer">GitHub Issues</a></li>
<li>Join our <a href="https://hyo.dev/joinSlack" target="_blank" rel="noopener noreferrer">Slack community</a></li>
<li>Review the <a href="https://hyochan.github.io/expo-iap" target="_blank" rel="noopener noreferrer">full documentation</a></li>
</ul>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="Breaking Change" term="Breaking Change"/>
        <category label="Migration" term="Migration"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[2.7.0 - New Platform API & Google Play Billing v8]]></title>
        <id>https://hyochan.github.io/expo-iap/blog/2.7.0</id>
        <link href="https://hyochan.github.io/expo-iap/blog/2.7.0"/>
        <updated>2025-07-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We're excited to announce expo-iap 2.7.0! This release includes a cleaner platform-specific API for handling purchases and full support for Google Play Billing Library v8.0.0.]]></summary>
        <content type="html"><![CDATA[<p>We're excited to announce expo-iap 2.7.0! This release includes a cleaner platform-specific API for handling purchases and full support for Google Play Billing Library v8.0.0.</p>
<!-- -->
<div style="flex:1;margin-top:24px;margin-bottom:24px"><div class="adfit-top"></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-new-platform-specific-api">🎯 New Platform-Specific API<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#-new-platform-specific-api" class="hash-link" aria-label="Direct link to 🎯 New Platform-Specific API" title="Direct link to 🎯 New Platform-Specific API">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-problem">The Problem<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#the-problem" class="hash-link" aria-label="Direct link to The Problem" title="Direct link to The Problem">​</a></h3>
<p>Previously, developers had to write conditional logic to handle platform differences:</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Old approach - requires platform checks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Platform</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ios'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> productId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">productId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>This approach had several issues:</p>
<ul>
<li>Required manual platform checks</li>
<li>Easy to miss platform-specific parameters</li>
<li>TypeScript couldn't provide proper platform-specific type hints</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-solution-platform-specific-parameters">The Solution: Platform-Specific Parameters<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#the-solution-platform-specific-parameters" class="hash-link" aria-label="Direct link to The Solution: Platform-Specific Parameters" title="Direct link to The Solution: Platform-Specific Parameters">​</a></h3>
<p>The new API introduces a cleaner structure with explicit platform parameters:</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// New approach - clear platform separation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> productId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      appAccountToken</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'user-123'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">productId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      obfuscatedAccountIdAndroid</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'user-123'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-benefits">Key Benefits<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#key-benefits" class="hash-link" aria-label="Direct link to Key Benefits" title="Direct link to Key Benefits">​</a></h3>
<ol>
<li><strong>Better Type Safety</strong>: TypeScript now provides accurate autocompletion for each platform's specific parameters</li>
<li><strong>Clearer Code Structure</strong>: Platform-specific logic is clearly separated</li>
<li><strong>Backward Compatibility</strong>: The old API still works, so you can migrate at your own pace</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="migration-examples">Migration Examples<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#migration-examples" class="hash-link" aria-label="Direct link to Migration Examples" title="Direct link to Migration Examples">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="basic-product-purchase">Basic Product Purchase<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#basic-product-purchase" class="hash-link" aria-label="Direct link to Basic Product Purchase" title="Direct link to Basic Product Purchase">​</a></h4>
<p><strong>Before:</strong></p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">buyProduct</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">productId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Platform</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ios'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> productId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">productId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><strong>After:</strong></p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">buyProduct</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">productId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> productId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">productId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="subscription-purchase">Subscription Purchase<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#subscription-purchase" class="hash-link" aria-label="Direct link to Subscription Purchase" title="Direct link to Subscription Purchase">​</a></h4>
<p><strong>Before:</strong></p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">buySubscription</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">subId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Platform</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">OS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ios'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> subId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        appAccountToken</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'user-123'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'subs'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> subscription </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> subscriptions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> subId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> offer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> subscription</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">subscriptionOfferDetails</span><span class="token operator" style="color:#393A34">?.</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">subId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        subscriptionOffers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> subId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            offerToken</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> offer</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">offerToken </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">''</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'subs'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><strong>After:</strong></p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">buySubscription</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">subId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> subscription </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> subscriptions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> subId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> subId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        appAccountToken</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'user-123'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">subId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        subscriptionOffers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          subscription</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">subscriptionOfferDetails</span><span class="token operator" style="color:#393A34">?.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">offer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> subId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            offerToken</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> offer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">offerToken</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'subs'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="platform-specific-parameters">Platform-Specific Parameters<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#platform-specific-parameters" class="hash-link" aria-label="Direct link to Platform-Specific Parameters" title="Direct link to Platform-Specific Parameters">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ios-parameters">iOS Parameters<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#ios-parameters" class="hash-link" aria-label="Direct link to iOS Parameters" title="Direct link to iOS Parameters">​</a></h4>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                                        </span><span class="token comment" style="color:#999988;font-style:italic">// Required: Product SKU</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    andDangerouslyFinishTransactionAutomatically</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    appAccountToken</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                           </span><span class="token comment" style="color:#999988;font-style:italic">// For server validation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    quantity</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                                  </span><span class="token comment" style="color:#999988;font-style:italic">// For bulk purchases</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    withOffer</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">PaymentDiscount</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                        </span><span class="token comment" style="color:#999988;font-style:italic">// For discounts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="android-parameters">Android Parameters<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#android-parameters" class="hash-link" aria-label="Direct link to Android Parameters" title="Direct link to Android Parameters">​</a></h4>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                                     </span><span class="token comment" style="color:#999988;font-style:italic">// Required: Product SKUs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    obfuscatedAccountIdAndroid</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// User identifier</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    obfuscatedProfileIdAndroid</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// Profile identifier</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    isOfferPersonalized</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic">// For personalized pricing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// For subscriptions only:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    subscriptionOffers</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      offerToken</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    purchaseTokenAndroid</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic">// For upgrades/downgrades</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replacementModeAndroid</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// Proration mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-deprecation-notice-requestsubscription">🔄 Deprecation Notice: requestSubscription<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#-deprecation-notice-requestsubscription" class="hash-link" aria-label="Direct link to 🔄 Deprecation Notice: requestSubscription" title="Direct link to 🔄 Deprecation Notice: requestSubscription">​</a></h2>
<p>Starting from 2.7.0, <code>requestSubscription</code> is deprecated in favor of using <code>requestPurchase</code> with <code>type: 'subs'</code>. This unifies our API and makes the codebase cleaner.</p>
<p><strong>Migration example:</strong></p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Old way (deprecated)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestSubscription</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> subscriptionId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">subscriptionId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// New way (recommended)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> subscriptionId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">subscriptionId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'subs'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-google-play-billing-library-v800-support">🤖 Google Play Billing Library v8.0.0 Support<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#-google-play-billing-library-v800-support" class="hash-link" aria-label="Direct link to 🤖 Google Play Billing Library v8.0.0 Support" title="Direct link to 🤖 Google Play Billing Library v8.0.0 Support">​</a></h2>
<p>We've updated to Google Play Billing Library v8.0.0 to meet Google Play's latest requirements. For more details on the migration, see <a href="https://developer.android.com/google/play/billing/migrate-gpblv8" target="_blank" rel="noopener noreferrer">Google's official migration guide</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-changes">Key Changes<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#key-changes" class="hash-link" aria-label="Direct link to Key Changes" title="Direct link to Key Changes">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-updated-dependencies">1. Updated Dependencies<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#1-updated-dependencies" class="hash-link" aria-label="Direct link to 1. Updated Dependencies" title="Direct link to 1. Updated Dependencies">​</a></h4>
<p>The Android module now uses the latest Google Play Billing Library:</p>
<div class="language-gradle codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gradle codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">implementation "com.android.billingclient:billing-ktx:8.0.0"</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-removed-deprecated-methods">2. Removed Deprecated Methods<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#2-removed-deprecated-methods" class="hash-link" aria-label="Direct link to 2. Removed Deprecated Methods" title="Direct link to 2. Removed Deprecated Methods">​</a></h4>
<blockquote>
<p>getPurchaseHistory is no longer available on Android</p>
</blockquote>
<p>Google Play Billing Library v8 has removed the <code>queryPurchaseHistoryAsync()</code> method. The <code>getPurchaseHistories()</code> function will now return an empty array on Android with a console warning:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before v8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> history </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getPurchaseHistories</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Returns purchase history</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After v8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> history </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getPurchaseHistories</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Returns [] on Android with warning</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Use getAvailablePurchases() instead for active purchases</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-automatic-service-reconnection">3. Automatic Service Reconnection<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#3-automatic-service-reconnection" class="hash-link" aria-label="Direct link to 3. Automatic Service Reconnection" title="Direct link to 3. Automatic Service Reconnection">​</a></h4>
<p>The library now includes automatic service reconnection support, improving reliability when the billing service disconnects unexpectedly.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-sub-response-codes">4. Sub-Response Codes<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#4-sub-response-codes" class="hash-link" aria-label="Direct link to 4. Sub-Response Codes" title="Direct link to 4. Sub-Response Codes">​</a></h4>
<p>The library now provides more detailed error information through sub-response codes:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Error object now includes sub-response codes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">responseCode</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ERROR</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">debugMessage</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Error processing purchase"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">subResponseCode</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// PAYMENT_DECLINED_DUE_TO_INSUFFICIENT_FUNDS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">subResponseMessage</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Payment declined due to insufficient funds"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes-summary">Breaking Changes Summary<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#breaking-changes-summary" class="hash-link" aria-label="Direct link to Breaking Changes Summary" title="Direct link to Breaking Changes Summary">​</a></h3>
<ol>
<li><strong><code>getPurchaseHistory()</code> removed</strong> - Use <code>getAvailablePurchases()</code> instead</li>
<li><strong><code>querySkuDetailsAsync()</code> removed</strong> - Already migrated to <code>queryProductDetailsAsync()</code></li>
<li><strong><code>enablePendingPurchases()</code> signature changed</strong> - Now requires <code>PendingPurchasesParams</code></li>
<li><strong><code>queryPurchasesAsync(skuType)</code> removed</strong> - Use <code>queryPurchasesAsync(QueryPurchasesParams)</code> instead</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="migration-guide-for-getpurchasehistory">Migration Guide for getPurchaseHistory<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#migration-guide-for-getpurchasehistory" class="hash-link" aria-label="Direct link to Migration Guide for getPurchaseHistory" title="Direct link to Migration Guide for getPurchaseHistory">​</a></h3>
<p>If you're using <code>getPurchaseHistory()</code> or <code>getPurchaseHistories()</code> on Android:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Old approach</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> history </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getPurchaseHistories</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// New approach - use getAvailablePurchases for active purchases</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> activePurchases </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAvailablePurchases</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-best-practices">🚀 Best Practices<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#-best-practices" class="hash-link" aria-label="Direct link to 🚀 Best Practices" title="Direct link to 🚀 Best Practices">​</a></h2>
<ol>
<li>
<p><strong>Handle Platform Availability</strong>: Not all parameters need to be set for both platforms</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">sku</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> productId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">skus</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">productId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Use TypeScript</strong>: Let TypeScript guide you with autocompletion</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestPurchase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  request</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ios</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// TypeScript will show iOS-specific options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// TypeScript will show Android-specific options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Gradual Migration</strong>: The old API still works, migrate at your own pace</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-upgrading">📦 Upgrading<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#-upgrading" class="hash-link" aria-label="Direct link to 📦 Upgrading" title="Direct link to 📦 Upgrading">​</a></h2>
<p>To upgrade to version 2.7.0:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install expo-iap@2.7.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn add expo-iap@2.7.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bun add expo-iap@2.7.0</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h3>
<ul>
<li>Android Gradle Plugin 4.0 or higher</li>
<li>Kotlin 1.6 or higher</li>
<li>JVM target 17 (automatically configured)</li>
<li>Google Play's latest billing requirements (deadline: August 31, 2025)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-benefits">🎉 Benefits<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#-benefits" class="hash-link" aria-label="Direct link to 🎉 Benefits" title="Direct link to 🎉 Benefits">​</a></h2>
<ul>
<li><strong>Cleaner Code</strong>: No more Platform.OS checks in your purchase logic</li>
<li><strong>Better Type Safety</strong>: Platform-specific TypeScript hints</li>
<li><strong>Future-Proof</strong>: Compliance with Google Play's latest requirements</li>
<li><strong>Improved Reliability</strong>: Automatic service reconnection on Android</li>
<li><strong>Enhanced Error Handling</strong>: Detailed sub-response codes</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-documentation">📚 Documentation<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#-documentation" class="hash-link" aria-label="Direct link to 📚 Documentation" title="Direct link to 📚 Documentation">​</a></h2>
<ul>
<li>Check our <a href="https://hyochan.github.io/expo-iap/docs/guides/purchases">updated documentation</a></li>
<li>View <a href="https://github.com/hyochan/expo-iap/tree/main/example" target="_blank" rel="noopener noreferrer">complete examples</a></li>
<li>Join our <a href="https://github.com/hyochan/expo-iap/discussions" target="_blank" rel="noopener noreferrer">community discussions</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-feedback">💬 Feedback<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#-feedback" class="hash-link" aria-label="Direct link to 💬 Feedback" title="Direct link to 💬 Feedback">​</a></h2>
<p>If you encounter any issues with this update, please <a href="https://github.com/hyochan/expo-iap/issues" target="_blank" rel="noopener noreferrer">open an issue</a> on our GitHub repository.</p>
<p>Happy coding! 🚀</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="263--ios-apptransaction-support">2.6.3 — iOS AppTransaction Support<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#263--ios-apptransaction-support" class="hash-link" aria-label="Direct link to 2.6.3 — iOS AppTransaction Support" title="Direct link to 2.6.3 — iOS AppTransaction Support">​</a></h2>
<p>We're excited to highlight the 2.6.3 update that shipped critical fixes and full coverage for iOS AppTransaction (StoreKit 2) properties.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="whats-new">What's New<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#whats-new" class="hash-link" aria-label="Direct link to What's New" title="Direct link to What's New">​</a></h3>
<p>Complete AppTransaction properties are now returned by <code>getAppTransactionIOS()</code>:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">AppTransactionIOS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  appTransactionID</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bundleID</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  appVersion</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  originalAppVersion</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  originalPurchaseDate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deviceVerification</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deviceVerificationNonce</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  environment</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  signedDate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  appID</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  appVersionID</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  originalPlatform</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  preorderDate</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-properties-added">Key Properties Added<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#key-properties-added" class="hash-link" aria-label="Direct link to Key Properties Added" title="Direct link to Key Properties Added">​</a></h3>
<ul>
<li><code>appTransactionID</code>: The unique identifier for the app transaction</li>
<li><code>environment</code>: Indicates whether the transaction occurred in Production, Sandbox, or Xcode environment</li>
<li><code>signedDate</code>: The date when the transaction was signed</li>
<li><code>appID</code> and <code>appVersionID</code>: App Store identifiers for the app and version</li>
<li><code>originalPlatform</code>: The platform where the app was originally purchased</li>
<li><code>preorderDate</code>: Available when the app was pre-ordered</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="usage-example">Usage Example<a href="https://hyochan.github.io/expo-iap/blog/2.7.0#usage-example" class="hash-link" aria-label="Direct link to Usage Example" title="Direct link to Usage Example">​</a></h3>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">getAppTransactionIOS</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">getAppPurchaseInfo</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> appTransaction </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAppTransactionIOS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'App Transaction ID:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">appTransactionID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Environment:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">environment</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">'Original Purchase Date:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">originalPurchaseDate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Check if app was pre-ordered</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">preorderDate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Pre-order Date:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">preorderDate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Failed to get app transaction:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>Note: In 2.8.0, these fields were renamed to use the unified <code>Id</code> casing (for example, <code>appTransactionId</code>, <code>bundleId</code>, <code>appVersionId</code>). See the 2.8.0 migration guide for details.</p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="API" term="API"/>
        <category label="Breaking Changes" term="Breaking Changes"/>
        <category label="Android" term="Android"/>
        <category label="Google Play Billing" term="Google Play Billing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[2.6.0 - Major iOS Improvements]]></title>
        <id>https://hyochan.github.io/expo-iap/blog/2.6.0</id>
        <link href="https://hyochan.github.io/expo-iap/blog/2.6.0"/>
        <updated>2025-07-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[We're excited to announce the release of expo-iap 2.6.0! This release brings significant improvements to iOS functionality, better TypeScript support, and enhanced developer experience.]]></summary>
        <content type="html"><![CDATA[<p>We're excited to announce the release of expo-iap 2.6.0! This release brings significant improvements to iOS functionality, better TypeScript support, and enhanced developer experience.</p>
<!-- -->
<div style="flex:1;margin-top:24px;margin-bottom:24px"><div class="adfit-top"></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-whats-new">🎉 What's New<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#-whats-new" class="hash-link" aria-label="Direct link to 🎉 What's New" title="Direct link to 🎉 What's New">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-proper-ios-subscription-data-serialization">1. Proper iOS Subscription Data Serialization<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#1-proper-ios-subscription-data-serialization" class="hash-link" aria-label="Direct link to 1. Proper iOS Subscription Data Serialization" title="Direct link to 1. Proper iOS Subscription Data Serialization">​</a></h3>
<p>The biggest improvement in this release is the proper serialization of iOS subscription data. Previously, the <code>subscription</code> field would return undefined for subscription products. Now, all subscription information is properly serialized and accessible.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="before-25x">Before (2.5.x)<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#before-25x" class="hash-link" aria-label="Direct link to Before (2.5.x)" title="Direct link to Before (2.5.x)">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> subscriptions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSubscriptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'com.example.premium'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">subscriptions</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// undefined 😢</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="after-260">After (2.6.0)<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#after-260" class="hash-link" aria-label="Direct link to After (2.6.0)" title="Direct link to After (2.6.0)">​</a></h4>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> subscriptions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSubscriptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'com.example.premium'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">subscriptions</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ✅ Full subscription data!</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-improved-type-structure">2. Improved Type Structure<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#2-improved-type-structure" class="hash-link" aria-label="Direct link to 2. Improved Type Structure" title="Direct link to 2. Improved Type Structure">​</a></h3>
<p>We've restructured how period information is returned to be more consistent and useful. The <code>period</code> and <code>subscriptionPeriod</code> properties now return objects with <code>unit</code> and <code>value</code> properties instead of just the unit string.</p>
<p><strong>Before (2.5.x):</strong></p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">SubscriptionInfo</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subscriptionPeriod</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> SubscriptionIosPeriod</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 'DAY' | 'WEEK' | 'MONTH' | 'YEAR'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><strong>After (2.6.0):</strong></p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">SubscriptionInfo</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subscriptionPeriod</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    unit</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> SubscriptionIosPeriod</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 'DAY' | 'WEEK' | 'MONTH' | 'YEAR'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// e.g., 1, 3, 6, 12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>This change provides more detailed information about subscription periods. For example, instead of just knowing a subscription is "MONTH", you now know if it's "1 MONTH", "3 MONTHS", etc.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-new-getstorefront-api">3. New getStorefront() API<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#3-new-getstorefront-api" class="hash-link" aria-label="Direct link to 3. New getStorefront() API" title="Direct link to 3. New getStorefront() API">​</a></h3>
<p>Get the user's App Store country code:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">getStorefront</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> countryCode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getStorefront</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'User storefront:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> countryCode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 'US', 'GB', 'JP', etc.</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-apptransaction-support-ios-160">4. AppTransaction Support (iOS 16.0+)<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#4-apptransaction-support-ios-160" class="hash-link" aria-label="Direct link to 4. AppTransaction Support (iOS 16.0+)" title="Direct link to 4. AppTransaction Support (iOS 16.0+)">​</a></h3>
<p>For premium apps or apps that were previously paid, you can now verify the initial app purchase:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">getAppTransaction</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> appTransaction </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAppTransaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'App Transaction ID:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">appTransactionID</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Purchase Date:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">appTransaction</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">originalPurchaseDate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Send deviceVerification to your server for validation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-comprehensive-ios-subscription-offers-documentation">5. Comprehensive iOS Subscription Offers Documentation<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#5-comprehensive-ios-subscription-offers-documentation" class="hash-link" aria-label="Direct link to 5. Comprehensive iOS Subscription Offers Documentation" title="Direct link to 5. Comprehensive iOS Subscription Offers Documentation">​</a></h3>
<p>We've added extensive documentation for handling iOS subscription offers:</p>
<ul>
<li>Understanding introductory and promotional offers</li>
<li>Checking user eligibility</li>
<li>Implementing offer UI</li>
<li>Best practices and troubleshooting</li>
</ul>
<p>Check out the new <a href="https://hyochan.github.io/expo-iap/docs/2.6/guides/ios-subscription-offers">iOS Subscription Offers Guide</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-breaking-changes">⚠️ Breaking Changes<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#%EF%B8%8F-breaking-changes" class="hash-link" aria-label="Direct link to ⚠️ Breaking Changes" title="Direct link to ⚠️ Breaking Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-period-structure-changes">1. Period Structure Changes<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#1-period-structure-changes" class="hash-link" aria-label="Direct link to 1. Period Structure Changes" title="Direct link to 1. Period Structure Changes">​</a></h3>
<p>The <code>period</code> and <code>subscriptionPeriod</code> properties now return objects with <code>unit</code> and <code>value</code> properties:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">offer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">period </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'MONTH'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Monthly offer'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">offer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">period</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unit </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'MONTH'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">offer</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation">period</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation">value</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c"> month(s) offer</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-optional-subscription-field">2. Optional Subscription Field<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#2-optional-subscription-field" class="hash-link" aria-label="Direct link to 2. Optional Subscription Field" title="Direct link to 2. Optional Subscription Field">​</a></h3>
<p>The <code>subscription</code> field in <code>ProductIOS</code> is now optional to reflect that not all iOS products have subscription information:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">ProductIOS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subscription</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> SubscriptionInfo</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Always required</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">ProductIOS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subscription</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> SubscriptionInfo</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Optional - only present for subscriptions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p><strong>Migration:</strong> Update your code to handle the optional subscription field:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Check if product is a subscription</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Handle subscription-specific logic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Period:'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscriptionPeriod</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-method-naming-update">3. Method Naming Update<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#3-method-naming-update" class="hash-link" aria-label="Direct link to 3. Method Naming Update" title="Direct link to 3. Method Naming Update">​</a></h3>
<p>To improve consistency, we've updated the purchase history method naming:</p>
<ul>
<li><strong>Deprecated</strong>: <code>getPurchaseHistory()</code> (singular)</li>
<li><strong>New</strong>: <code>getPurchaseHistories()</code> (plural)</li>
</ul>
<p>The <code>useIAP</code> hook already uses the plural form:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">purchaseHistories</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> getPurchaseHistories</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useIAP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-complete-example">📋 Complete Example<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#-complete-example" class="hash-link" aria-label="Direct link to 📋 Complete Example" title="Direct link to 📋 Complete Example">​</a></h2>
<p>Here's a complete example showing how to work with the new types:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">useIAP</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'expo-iap'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ProductList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">products</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useIAP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">View</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">products</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">View key</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">productId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">displayName</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">localizedPrice</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">View</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Subscription Period</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">' '</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscriptionPeriod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">' '</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscriptionPeriod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toLowerCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">introductoryOffer </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  Intro Offer</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">' '</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">introductoryOffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">displayPrice</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">' '</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">introductoryOffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">period</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">' '</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">product</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscription</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">introductoryOffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">period</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unit</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toLowerCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Text</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">View</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">View</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">View</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-bug-fixes">🐛 Bug Fixes<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#-bug-fixes" class="hash-link" aria-label="Direct link to 🐛 Bug Fixes" title="Direct link to 🐛 Bug Fixes">​</a></h2>
<ul>
<li>Fixed iOS subscription data not being properly serialized</li>
<li>Fixed period information returning raw values instead of structured data</li>
<li>Improved error handling for platform-specific methods</li>
<li>Fixed inconsistent naming between <code>getPurchaseHistory</code> and <code>purchaseHistories</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-documentation-updates">📚 Documentation Updates<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#-documentation-updates" class="hash-link" aria-label="Direct link to 📚 Documentation Updates" title="Direct link to 📚 Documentation Updates">​</a></h2>
<ul>
<li>Added iOS Subscription Offers guide</li>
<li>Updated type definitions documentation</li>
<li>Added examples for new APIs</li>
<li>Improved troubleshooting section</li>
<li>Updated migration guide for naming consistency</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-benefits">💪 Benefits<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#-benefits" class="hash-link" aria-label="Direct link to 💪 Benefits" title="Direct link to 💪 Benefits">​</a></h2>
<p>These improvements provide several benefits:</p>
<ol>
<li><strong>Better Type Safety</strong>: The TypeScript compiler can now catch more potential errors at compile time</li>
<li><strong>More Accurate Data</strong>: Period information now includes both unit and value, providing complete subscription duration details</li>
<li><strong>Clearer Intent</strong>: Optional types make it explicit which products are subscriptions</li>
<li><strong>Consistent API</strong>: Naming conventions are now consistent throughout the library</li>
<li><strong>Future-Proof</strong>: These changes align better with Apple's StoreKit 2 data structures</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-acknowledgments">🙏 Acknowledgments<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#-acknowledgments" class="hash-link" aria-label="Direct link to 🙏 Acknowledgments" title="Direct link to 🙏 Acknowledgments">​</a></h2>
<p>Special thanks to:</p>
<ul>
<li><a href="https://github.com/Navipro70" target="_blank" rel="noopener noreferrer">@Navipro70</a> for identifying the subscription serialization issue and providing valuable feedback</li>
<li><a href="https://github.com/matthieuMay" target="_blank" rel="noopener noreferrer">@matthieuMay</a> for the initial iOS type improvements</li>
<li>All contributors who helped test and improve this release</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-installation">📦 Installation<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#-installation" class="hash-link" aria-label="Direct link to 📦 Installation" title="Direct link to 📦 Installation">​</a></h2>
<p>Update to the latest version:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install expo-iap@2.6.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn add expo-iap@2.6.0</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-links">🔗 Links<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#-links" class="hash-link" aria-label="Direct link to 🔗 Links" title="Direct link to 🔗 Links">​</a></h2>
<ul>
<li><a href="https://github.com/hyochan/expo-iap/releases/tag/v2.6.0" target="_blank" rel="noopener noreferrer">Full Changelog</a></li>
<li><a href="https://hyochan.github.io/expo-iap/docs/2.6/guides/ios-subscription-offers">iOS Subscription Offers Guide</a></li>
<li><a href="https://hyochan.github.io/expo-iap/docs/api/methods/core-methods">API Reference</a></li>
<li><a href="https://hyochan.github.io/expo-iap/docs/2.6/guides/migration">Migration Guide</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What's Next?<a href="https://hyochan.github.io/expo-iap/blog/2.6.0#whats-next" class="hash-link" aria-label="Direct link to What's Next?" title="Direct link to What's Next?">​</a></h2>
<p>We're working on:</p>
<ul>
<li>Android subscription offers improvements</li>
<li>Better error messages and debugging tools</li>
<li>Performance optimizations</li>
<li>More comprehensive examples</li>
</ul>
<p>Stay tuned for more updates! If you have any feedback or suggestions, please <a href="https://github.com/hyochan/expo-iap/issues" target="_blank" rel="noopener noreferrer">open an issue</a>.</p>
<p>Happy coding! 🚀</p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Release" term="Release"/>
        <category label="iOS" term="iOS"/>
        <category label="TypeScript" term="TypeScript"/>
        <category label="Breaking Changes" term="Breaking Changes"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Welcome to Expo IAP Documentation]]></title>
        <id>https://hyochan.github.io/expo-iap/blog/welcome-to-expo-iap</id>
        <link href="https://hyochan.github.io/expo-iap/blog/welcome-to-expo-iap"/>
        <updated>2025-06-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Welcome to the official documentation site for Expo IAP! 🎉]]></summary>
        <content type="html"><![CDATA[<p>Welcome to the official documentation site for <strong>Expo IAP</strong>! 🎉</p>
<p>We're excited to share this comprehensive resource for developers looking to implement in-app purchases in their Expo and React Native applications.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-new">What's New<a href="https://hyochan.github.io/expo-iap/blog/welcome-to-expo-iap#whats-new" class="hash-link" aria-label="Direct link to What's New" title="Direct link to What's New">​</a></h2>
<p>This documentation site features:</p>
<ul>
<li><strong>🚀 Quick Start Guide</strong> - Get up and running in 5 minutes</li>
<li><strong>📱 Platform-specific Setup</strong> - Detailed guides for iOS and Android</li>
<li><strong>🎣 useIAP Hook API</strong> - Complete API reference with examples</li>
<li><strong>⚠️ Error Handling</strong> - Centralized error code management</li>
<li><strong>🎨 Beautiful Design</strong> - Clean, modern interface with oatmeal theme</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting Started<a href="https://hyochan.github.io/expo-iap/blog/welcome-to-expo-iap#getting-started" class="hash-link" aria-label="Direct link to Getting Started" title="Direct link to Getting Started">​</a></h2>
<p>Ready to add in-app purchases to your app? Start with our <a href="https://hyochan.github.io/expo-iap/docs/installation">installation guide</a> and follow our step-by-step setup process.</p>
<p>Have questions or feedback? We'd love to hear from you on <a href="https://github.com/hyochan/expo-iap" target="_blank" rel="noopener noreferrer">GitHub</a>!</p>]]></content>
        <author>
            <name>Hyo</name>
            <uri>https://github.com/hyochan</uri>
        </author>
        <category label="Expo IAP" term="Expo IAP"/>
        <category label="In-App Purchase" term="In-App Purchase"/>
        <category label="React Native" term="React Native"/>
    </entry>
</feed>