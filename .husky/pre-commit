#!/usr/bin/env sh
. "$(dirname "$0")/_/husky.sh"

# Lint TypeScript/JS (and Kotlin if available)
echo "Linting (tsc/eslint/prettier/kt)…"
bun run lint:ci || {
  echo "Lint failed. Aborting commit." >&2
  exit 1
}

# Run tests with coverage before committing to reduce CI failures
echo "Running test coverage (pre-commit)…"
bun run test:coverage || {
  echo "Tests failed. Aborting commit." >&2
  exit 1
}
