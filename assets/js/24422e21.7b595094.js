"use strict";(globalThis.webpackChunkexpo_iap_docs=globalThis.webpackChunkexpo_iap_docs||[]).push([[7519],{571:(e,n,i)=>{i.d(n,{A:()=>s});var t=i(6540),o=i(4848);function r({className:e="adfit",style:n,unit:i,height:r,width:s}){return(0,t.useEffect)(()=>{const n=setTimeout(()=>{const n=document.querySelector(`.${e}`);if(!n)return void console.warn(`AdFit: Element with class "${e}" not found`);const t=n.querySelectorAll(".kakao_ad_area"),o=n.querySelectorAll('script[src*="kas/static/ba.min.js"]');t.forEach(e=>e.remove()),o.forEach(e=>e.remove());const a=document.createElement("ins"),d=document.createElement("script");a.className="kakao_ad_area",a.style.cssText="display:none; width:100%;",d.async=!0,d.type="text/javascript",d.src="//t1.daumcdn.net/kas/static/ba.min.js",a.setAttribute("data-ad-width",s.toString()),a.setAttribute("data-ad-height",r.toString()),a.setAttribute("data-ad-unit",i),n.appendChild(a),n.appendChild(d)},100);return()=>clearTimeout(n)},[e,i,r,s]),(0,o.jsx)("div",{style:n,children:(0,o.jsx)("div",{className:e})})}function s(){return(0,o.jsx)(r,{unit:"DAN-YTmjDwlbcP42HBg6",height:100,width:320,className:"adfit-top",style:{flex:1,marginTop:24,marginBottom:24}})}},2506:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"getting-started/setup-horizon","title":"Horizon OS","description":"This guide covers setting up expo-iap for Meta Quest devices running Horizon OS.","source":"@site/docs/getting-started/setup-horizon.md","sourceDirName":"getting-started","slug":"/getting-started/setup-horizon","permalink":"/expo-iap/docs/getting-started/setup-horizon","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/expo-iap/tree/main/docs/docs/getting-started/setup-horizon.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Android Setup","permalink":"/expo-iap/docs/getting-started/setup-android"},"next":{"title":"Purchases","permalink":"/expo-iap/docs/guides/purchases"}}');var o=i(4848),r=i(8453),s=i(571);const a={sidebar_position:3},d="Horizon OS",l={},c=[{value:"Prerequisites &amp; Setup",id:"prerequisites--setup",level:2},{value:"Configuration",id:"configuration",level:2},{value:"1. Enable Horizon Mode",id:"1-enable-horizon-mode",level:3},{value:"2. Rebuild Your App",id:"2-rebuild-your-app",level:3},{value:"Platform Detection",id:"platform-detection",level:2},{value:"Testing",id:"testing",level:2},{value:"Installing Test Builds",id:"installing-test-builds",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Next Steps",id:"next-steps",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"horizon-os",children:"Horizon OS"})}),"\n",(0,o.jsx)(s.A,{}),"\n",(0,o.jsx)(n.p,{children:"This guide covers setting up expo-iap for Meta Quest devices running Horizon OS."}),"\n",(0,o.jsxs)(n.admonition,{type:"info",children:[(0,o.jsxs)(n.mdxAdmonitionTitle,{children:["Horizon OS Support Horizon OS support is available starting from ",(0,o.jsx)(n.strong,{children:"expo-iap 3.1.22"}),". See the ",(0,o.jsx)(n.a,{href:"/blog/3.1.22",children:"release announcement"})," for more details. :::"]}),(0,o.jsxs)(n.admonition,{type:"tip",children:[(0,o.jsxs)(n.mdxAdmonitionTitle,{children:["Seamless Integration Horizon OS follows the ",(0,o.jsx)(n.a,{href:"https://openiap.dev",children:"OpenIAP specification"}),", which means ",(0,o.jsx)(n.strong,{children:"you can use the exact same expo-iap API"})," as you would for iOS and Android. No platform-specific code needed - just enable Horizon mode in your configuration and your existing purchase code works seamlessly! :::"]}),(0,o.jsx)(n.p,{children:"Horizon OS uses Meta's Platform SDK for in-app purchases instead of Google Play Billing, but expo-iap handles all the platform differences for you."}),(0,o.jsx)(n.h2,{id:"prerequisites--setup",children:"Prerequisites & Setup"}),(0,o.jsx)(n.p,{children:"For detailed setup instructions including creating your Meta Quest app, configuring IAP products, and obtaining your Horizon App ID, please refer to:"}),(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.a,{href:"https://www.openiap.dev/docs/horizon-setup",children:"OpenIAP Horizon OS Setup Guide"})})}),(0,o.jsx)(n.p,{children:"Once you have your Horizon App ID ready, continue with the Expo configuration below."}),(0,o.jsx)(n.h2,{id:"configuration",children:"Configuration"}),(0,o.jsx)(n.h3,{id:"1-enable-horizon-mode",children:"1. Enable Horizon Mode"}),(0,o.jsx)(n.p,{children:"Add the Horizon configuration to your app.config.ts (or app.json):"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"export default {\n  expo: {\n    // ... other config\n    plugins: [\n      [\n        'expo-iap',\n        {\n          modules: {\n            horizon: true, // Enable Horizon OS support\n          },\n          android: {\n            horizonAppId: 'YOUR_HORIZON_APP_ID', // Required: Your Horizon App ID\n          },\n        },\n      ],\n    ],\n  },\n};\n"})}),(0,o.jsx)(n.h3,{id:"2-rebuild-your-app",children:"2. Rebuild Your App"}),(0,o.jsx)(n.p,{children:"After adding the configuration, rebuild your Android project:"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npx expo prebuild --clean --platform android\n"})}),(0,o.jsx)(n.p,{children:"This will:"}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Set ",(0,o.jsx)(n.code,{children:"horizonEnabled=true"})," in ",(0,o.jsx)(n.code,{children:"gradle.properties"})]}),"\n",(0,o.jsxs)(n.li,{children:["Use ",(0,o.jsx)(n.code,{children:"openiap-google-horizon"})," artifact instead of ",(0,o.jsx)(n.code,{children:"openiap-google"})]}),"\n",(0,o.jsx)(n.li,{children:"Add Horizon Platform SDK dependencies"}),"\n",(0,o.jsx)(n.li,{children:"Configure the app with your Horizon App ID"}),"\n"]}),(0,o.jsx)(n.h2,{id:"platform-detection",children:"Platform Detection"}),(0,o.jsxs)(n.admonition,{title:"Currently, there is no reliable way to detect Horizon OS at runtime using React Native's Platform API. Horizon OS is based on Android and reports the same platform identifiers as standard Android devices. :::",type:"warning",children:[(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Best Practice"}),": Design your app to work seamlessly on both standard Android and Horizon OS without runtime detection. expo-iap automatically handles the platform differences when Horizon mode is enabled in your configuration."]}),(0,o.jsx)(n.p,{children:"If you need to conditionally enable features for Horizon OS, configure them at build time using your app.config.ts rather than runtime detection."}),(0,o.jsx)(n.h2,{id:"testing",children:"Testing"}),(0,o.jsx)(n.h3,{id:"installing-test-builds",children:"Installing Test Builds"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Build and install on Quest device\nnpx expo run:android --device\n"})}),(0,o.jsx)(n.p,{children:"Or using ADB:"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Install APK on Quest device\nadb install -r app-debug.apk\n\n# View logs\nadb logcat | grep ExpoIap\n"})}),(0,o.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),(0,o.jsx)(n.p,{children:"For expo-iap specific issues:"}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Verify ",(0,o.jsx)(n.code,{children:"horizon.appId"})," is correctly set in your app.config.ts"]}),"\n",(0,o.jsxs)(n.li,{children:["Run ",(0,o.jsx)(n.code,{children:"npx expo prebuild --clean"})," to regenerate native projects"]}),"\n",(0,o.jsxs)(n.li,{children:["Check logs with ",(0,o.jsx)(n.code,{children:"adb logcat | grep ExpoIap"})]}),"\n"]}),(0,o.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"./installation",children:"Review the installation guide"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"../api/methods/core-methods",children:"Explore core methods"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"../api/error-codes",children:"Understand error codes"})}),"\n"]})]})]})]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>a});var t=i(6540);const o={},r=t.createContext(o);function s(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);