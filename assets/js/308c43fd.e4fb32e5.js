"use strict";(globalThis.webpackChunkexpo_iap_docs=globalThis.webpackChunkexpo_iap_docs||[]).push([[8896],{571:(r,e,n)=>{n.d(e,{A:()=>a});var o=n(6540),s=n(4848);function t({className:r="adfit",style:e,unit:n,height:t,width:a}){return(0,o.useEffect)(()=>{const e=setTimeout(()=>{const e=document.querySelector(`.${r}`);if(!e)return void console.warn(`AdFit: Element with class "${r}" not found`);const o=e.querySelectorAll(".kakao_ad_area"),s=e.querySelectorAll('script[src*="kas/static/ba.min.js"]');o.forEach(r=>r.remove()),s.forEach(r=>r.remove());const i=document.createElement("ins"),c=document.createElement("script");i.className="kakao_ad_area",i.style.cssText="display:none; width:100%;",c.async=!0,c.type="text/javascript",c.src="//t1.daumcdn.net/kas/static/ba.min.js",i.setAttribute("data-ad-width",a.toString()),i.setAttribute("data-ad-height",t.toString()),i.setAttribute("data-ad-unit",n),e.appendChild(i),e.appendChild(c)},100);return()=>clearTimeout(e)},[r,n,t,a]),(0,s.jsx)("div",{style:e,children:(0,s.jsx)("div",{className:r})})}function a(){return(0,s.jsx)(t,{unit:"DAN-YTmjDwlbcP42HBg6",height:100,width:320,className:"adfit-top",style:{flex:1,marginTop:24,marginBottom:24}})}},8453:(r,e,n)=>{n.d(e,{R:()=>a,x:()=>i});var o=n(6540);const s={},t=o.createContext(s);function a(r){const e=o.useContext(t);return o.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function i(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(s):r.components||s:a(r.components),o.createElement(t.Provider,{value:e},r.children)}},8848:(r,e,n)=>{n.r(e),n.d(e,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"api/error-handling","title":"Error Handling","description":"All methods can throw errors that should be handled appropriately. Use the PurchaseError type and helper functions for consistent, cross\u2011platform error information.","source":"@site/docs/api/error-handling.md","sourceDirName":"api","slug":"/api/error-handling","permalink":"/expo-iap/docs/api/error-handling","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/expo-iap/tree/main/docs/docs/api/error-handling.md","tags":[],"version":"current","frontMatter":{"title":"Error Handling","sidebar_label":"Error Handling"},"sidebar":"tutorialSidebar","previous":{"title":"useIAP Hook","permalink":"/expo-iap/docs/api/use-iap"},"next":{"title":"Error Codes","permalink":"/expo-iap/docs/api/error-codes"}}');var s=n(4848),t=n(8453),a=n(571);const i={title:"Error Handling",sidebar_label:"Error Handling"},c="Error Handling",d={},l=[{value:"Error Types",id:"error-types",level:2},{value:"PurchaseError",id:"purchaseerror",level:3},{value:"ErrorCode Enum",id:"errorcode-enum",level:3},{value:"Error Codes",id:"error-codes",level:2}];function h(r){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...r.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"error-handling",children:"Error Handling"})}),"\n",(0,s.jsx)(a.A,{}),"\n",(0,s.jsxs)(e.p,{children:["All methods can throw errors that should be handled appropriately. Use the ",(0,s.jsx)(e.code,{children:"PurchaseError"})," type and helper functions for consistent, cross\u2011platform error information."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import {\n  PurchaseError,\n  requestPurchase,\n  isUserCancelledError,\n  isNetworkError,\n  getUserFriendlyErrorMessage,\n  ErrorCode,\n} from 'react-native-iap';\n\ntry {\n  await requestPurchase({request: {sku: 'product_id'}});\n} catch (error) {\n  // Check for user cancellation\n  if (isUserCancelledError(error)) {\n    console.log('User cancelled purchase');\n    return;\n  }\n\n  // Check for network errors\n  if (isNetworkError(error)) {\n    console.log('Network error, please try again');\n    return;\n  }\n\n  // Get user-friendly error message\n  const friendlyMessage = getUserFriendlyErrorMessage(error);\n  console.error('Purchase failed:', friendlyMessage);\n\n  // Or access error details directly\n  if (error instanceof PurchaseError) {\n    console.error(`Error code: ${error.code}, Message: ${error.message}`);\n  }\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"error-types",children:"Error Types"}),"\n",(0,s.jsx)(e.h3,{id:"purchaseerror",children:"PurchaseError"}),"\n",(0,s.jsxs)(e.p,{children:["The ",(0,s.jsx)(e.code,{children:"PurchaseError"})," interface extends the standard ",(0,s.jsx)(e.code,{children:"Error"})," class with additional purchase-specific properties:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"interface PurchaseError extends Error {\n  code?: ErrorCode;\n  responseCode?: number;\n  debugMessage?: string;\n  productId?: string;\n  platform?: IapPlatform;\n}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"errorcode-enum",children:"ErrorCode Enum"}),"\n",(0,s.jsxs)(e.p,{children:["Use the ",(0,s.jsx)(e.code,{children:"ErrorCode"})," enum for type-safe error code comparisons:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import {ErrorCode} from 'react-native-iap';\n\nif (error instanceof PurchaseError && error.code === ErrorCode.UserCancelled) {\n  // Handle user cancellation\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"error-codes",children:"Error Codes"}),"\n",(0,s.jsx)(e.p,{children:"For the complete list of error codes and their meanings, see the reference below."}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"./error-codes",children:"Error Codes"})}),"\n"]})]})}function u(r={}){const{wrapper:e}={...(0,t.R)(),...r.components};return e?(0,s.jsx)(e,{...r,children:(0,s.jsx)(h,{...r})}):h(r)}}}]);