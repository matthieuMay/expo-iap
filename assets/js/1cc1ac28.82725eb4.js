"use strict";(globalThis.webpackChunkexpo_iap_docs=globalThis.webpackChunkexpo_iap_docs||[]).push([[7889],{4965:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"guides/migration-2.8.6","title":"Migration to v2.8.6","description":"This version introduces a significant naming convention change for platform-specific functions to improve code clarity and maintainability.","source":"@site/versioned_docs/version-2.9/guides/migration-2.8.6.md","sourceDirName":"guides","slug":"/guides/migration-2.8.6","permalink":"/expo-iap/docs/2.9/guides/migration-2.8.6","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/expo-iap/tree/main/docs/versioned_docs/version-2.9/guides/migration-2.8.6.md","tags":[],"version":"2.9","sidebarPosition":2,"frontMatter":{"title":"Migration to v2.8.6","sidebar_label":"v2.8.6 Migration","sidebar_position":2}}');var r=i(4848),c=i(8453);const t={title:"Migration to v2.8.6",sidebar_label:"v2.8.6 Migration",sidebar_position:2},d="Migration Guide for v2.8.6",o={},l=[{value:"Breaking Changes",id:"breaking-changes",level:2},{value:"Platform-Specific Function Naming",id:"platform-specific-function-naming",level:3},{value:"iOS Function Changes",id:"ios-function-changes",level:3},{value:"Android Function Changes",id:"android-function-changes",level:3},{value:"New Functions Added",id:"new-functions-added",level:3},{value:"Deprecated Functions",id:"deprecated-functions",level:2},{value:"<code>getPurchaseHistories()</code>",id:"getpurchasehistories",level:3},{value:"<code>buyPromotedProductIOS()</code>",id:"buypromotedproductios",level:3},{value:"<code>disable()</code>",id:"disable",level:3},{value:"Migration Examples",id:"migration-examples",level:2},{value:"Using the useIAP Hook",id:"using-the-useiap-hook",level:3},{value:"Direct Function Imports",id:"direct-function-imports",level:3},{value:"Platform-Specific Code",id:"platform-specific-code",level:3},{value:"Benefits of the New Naming Convention",id:"benefits-of-the-new-naming-convention",level:2},{value:"Need Help?",id:"need-help",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"migration-guide-for-v286",children:"Migration Guide for v2.8.6"})}),"\n",(0,r.jsx)(n.p,{children:"This version introduces a significant naming convention change for platform-specific functions to improve code clarity and maintainability."}),"\n",(0,r.jsx)(n.h2,{id:"breaking-changes",children:"Breaking Changes"}),"\n",(0,r.jsx)(n.h3,{id:"platform-specific-function-naming",children:"Platform-Specific Function Naming"}),"\n",(0,r.jsx)(n.p,{children:"All platform-specific functions now have consistent suffixes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"iOS functions"}),": Use ",(0,r.jsx)(n.code,{children:"IOS"})," suffix"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Android functions"}),": Use ",(0,r.jsx)(n.code,{children:"Android"})," suffix"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Common functions"}),": No suffix"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"ios-function-changes",children:"iOS Function Changes"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Old Name"}),(0,r.jsx)(n.th,{children:"New Name"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"buyPromotedProduct"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"requestPurchaseOnPromotedProductIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sync"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"syncIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"isEligibleForIntroOffer"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"isEligibleForIntroOfferIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"subscriptionStatus"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"subscriptionStatusIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"currentEntitlement"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"currentEntitlementIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"latestTransaction"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"latestTransactionIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"showManageSubscriptions"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"showManageSubscriptionsIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"beginRefundRequest"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"beginRefundRequestIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"isTransactionVerified"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"isTransactionVerifiedIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"getTransactionJws"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"getTransactionJwsIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"getReceiptData"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"getReceiptIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"presentCodeRedemptionSheet"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"presentCodeRedemptionSheetIOS"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"getAppTransaction"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"getAppTransactionIOS"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"android-function-changes",children:"Android Function Changes"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Old Name"}),(0,r.jsx)(n.th,{children:"New Name"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"acknowledgePurchase"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"acknowledgePurchaseAndroid"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"consumeProduct"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"consumeProductAndroid"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"new-functions-added",children:"New Functions Added"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"getPendingTransactionsIOS()"})," - Get pending transactions on iOS"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"clearTransactionIOS()"})," - Clear a specific transaction on iOS"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"deprecated-functions",children:"Deprecated Functions"}),"\n",(0,r.jsx)(n.p,{children:"The following functions are deprecated and will be removed in v2.9.0:"}),"\n",(0,r.jsx)(n.h3,{id:"getpurchasehistories",children:(0,r.jsx)(n.code,{children:"getPurchaseHistories()"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reason"}),": This function just calls ",(0,r.jsx)(n.code,{children:"getAvailablePurchases()"})," internally"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Migration"}),": Use ",(0,r.jsx)(n.code,{children:"getAvailablePurchases()"})," instead"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// Before\nconst histories = await getPurchaseHistories();\n\n// After\nconst purchases = await getAvailablePurchases();\n"})}),"\n",(0,r.jsx)(n.h3,{id:"buypromotedproductios",children:(0,r.jsx)(n.code,{children:"buyPromotedProductIOS()"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reason"}),": Renamed for consistency"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Migration"}),": Use ",(0,r.jsx)(n.code,{children:"requestPurchaseOnPromotedProductIOS()"})," instead"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// Before\nawait buyPromotedProductIOS();\n\n// After\nawait requestPurchaseOnPromotedProductIOS();\n"})}),"\n",(0,r.jsx)(n.h3,{id:"disable",children:(0,r.jsx)(n.code,{children:"disable()"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reason"}),": Observer management is now automatic"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Migration"}),": Remove calls to this function - it's no longer needed"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"migration-examples",children:"Migration Examples"}),"\n",(0,r.jsx)(n.h3,{id:"using-the-useiap-hook",children:"Using the useIAP Hook"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// Before\nimport {useIAP} from 'expo-iap';\n\nconst MyComponent = () => {\n  const {buyPromotedProductIOS, getPurchaseHistories} = useIAP();\n\n  // ...\n};\n\n// After\nimport {useIAP} from 'expo-iap';\n\nconst MyComponent = () => {\n  const {requestPurchaseOnPromotedProductIOS, getAvailablePurchases} = useIAP();\n\n  // ...\n};\n"})}),"\n",(0,r.jsx)(n.h3,{id:"direct-function-imports",children:"Direct Function Imports"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// Before\nimport {\n  isEligibleForIntroOffer,\n  acknowledgePurchase,\n  getPurchaseHistories,\n} from 'expo-iap';\n\n// After\nimport {\n  isEligibleForIntroOfferIOS,\n  acknowledgePurchaseAndroid,\n  getAvailablePurchases,\n} from 'expo-iap';\n"})}),"\n",(0,r.jsx)(n.h3,{id:"platform-specific-code",children:"Platform-Specific Code"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import {Platform} from 'react-native';\nimport {acknowledgePurchaseAndroid, clearTransactionIOS} from 'expo-iap';\n\nconst finishPurchase = async (purchase: Purchase) => {\n  if (Platform.OS === 'ios') {\n    // iOS-specific function with IOS suffix\n    await clearTransactionIOS();\n  } else if (Platform.OS === 'android') {\n    // Android-specific function with Android suffix\n    await acknowledgePurchaseAndroid({token: purchase.purchaseToken});\n  }\n};\n"})}),"\n",(0,r.jsx)(n.h2,{id:"benefits-of-the-new-naming-convention",children:"Benefits of the New Naming Convention"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Clarity"}),": Function names immediately indicate platform compatibility"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type Safety"}),": Better TypeScript support with platform-specific types"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Maintainability"}),": Easier to identify and manage platform-specific code"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Consistency"}),": All platform-specific functions follow the same pattern"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"need-help",children:"Need Help?"}),"\n",(0,r.jsx)(n.p,{children:"If you encounter any issues during migration:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Check the ",(0,r.jsx)(n.a,{href:"/docs/api",children:"API documentation"})," for updated function signatures"]}),"\n",(0,r.jsxs)(n.li,{children:["Review the ",(0,r.jsx)(n.a,{href:"https://github.com/hyochan/expo-iap/tree/main/example",children:"example app"})," for usage patterns"]}),"\n",(0,r.jsxs)(n.li,{children:["Open an issue on ",(0,r.jsx)(n.a,{href:"https://github.com/hyochan/expo-iap/issues",children:"GitHub"})," if you need assistance"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>d});var s=i(6540);const r={},c=s.createContext(r);function t(e){const n=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);