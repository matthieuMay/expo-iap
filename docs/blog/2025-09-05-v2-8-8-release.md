---
slug: v2-8-8-release
title: v2.8.8 - Enhanced Subscription Management
authors: [hyochan]
tags: [release, subscriptions, ios, types, openiap]
---

# v2.8.8 Release Notes

This release enhances subscription management types, fixes critical iOS subscription issues, and improves compliance with OpenIAP v1.1.1 specification.

## Type Enhancements

### Enhanced ActiveSubscription Interface

Enhanced `ActiveSubscription` interface with backend validation fields:

- Added `transactionId` for transaction identification
- Added `purchaseToken` for JWT (iOS) or purchase token (Android)
- Added `transactionDate` for transaction timestamp

These fields enable proper backend validation of subscription status.

## API Documentation Updates

### showManageSubscriptionsIOS Returns Purchase Data

Updated `showManageSubscriptionsIOS()` to correctly reflect it returns `Purchase[]` containing subscriptions with changed auto-renewal status:

```typescript
const changes = await showManageSubscriptionsIOS();
// Returns Purchase[] with subscriptions that had status changes
```

## Critical iOS Fixes

### Fixed Active Subscription Filtering

`getAvailablePurchases({ onlyIncludeActiveItemsIOS: true })` was returning expired subscriptions. Now correctly uses `Transaction.currentEntitlements` for:

- Better performance
- Accurate active subscription filtering
- Simpler implementation

### Fixed SKU-Specific Status Matching

`showManageSubscriptionsIOS()` now properly matches subscription status to specific SKUs, preventing wrong status selection when multiple statuses exist in a subscription group.

## Performance Improvements

- Removed unnecessary event sending from `getAvailableItems()`
- Events are now only sent from `requestPurchase()` where they belong
- Removed complex polling logic for cleaner, more maintainable code

## OpenIAP Compliance

Updated to comply with [OpenIAP v1.1.1 specification](https://www.openiap.dev/docs/versions#v1-1-1) for standardized IAP implementation across platforms.

## Full Changelog

### Added

- Enhanced `ActiveSubscription` interface with backend validation fields:
  - `transactionId` - Transaction identifier for backend validation
  - `purchaseToken` - JWT token (iOS) or purchase token (Android) for backend validation
  - `transactionDate` - Transaction timestamp
- Return subscription changes from `showManageSubscriptionsIOS()` as Promise data

### Fixed

- Fixed iOS `getAvailablePurchases({ onlyIncludeActiveItemsIOS: true })` returning expired subscriptions
  - Now correctly uses `Transaction.currentEntitlements` for better performance and accuracy
- Fixed subscription status matching to specific SKU in `showManageSubscriptionsIOS()`
  - Prevents picking wrong status when multiple statuses exist in a subscription group

### Changed

- Removed unnecessary event sending from `getAvailableItems()` - events are only sent from `requestPurchase()`
- Removed polling logic from subscription status monitoring for cleaner code
- Updated to comply with OpenIAP v1.1.1 specification

## No Breaking Changes

All existing functionality continues to work unchanged.

Questions or issues? Please visit [GitHub Issues](https://github.com/hyochan/expo-iap/issues)!
