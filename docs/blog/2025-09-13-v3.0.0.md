---
slug: v3.0.0
title: Expo IAP 3.0 ‚Äî OpenIAP Integration, Unified Core, Leaner API
tags: [release, breaking-change, android, ios]
---

Expo IAP 3.0 is a major release that fully integrates [OpenIAP](https://openiap.dev)‚Äôs Android and iOS modules. Expo IAP is no longer just a framework bridge ‚Äî it now leverages a centralized [OpenIAP](https://openiap.dev) core for shared logic across platforms and SDKs. The result is a leaner, more maintainable codebase with faster iteration and greater stability.

<!-- truncate -->

import AdFitTopFixed from "@site/src/uis/AdFitTopFixed";

<AdFitTopFixed />

## üöÄ Highlights

- Unified tokens: `Purchase.purchaseToken` is now the single source on both platforms (iOS JWS or Android token). The old `jwsRepresentationIOS` is removed.
- Leaner API: Legacy helpers are removed. Use `fetchProducts`, `requestPurchase`, `getAvailablePurchases`, and listeners.
- iOS parity: Only `*IOS` helpers remain for iOS‚Äëspecific behavior. `showManageSubscriptionsIOS()` now returns an array of purchases instead of a boolean.
- Stronger types: Consolidated product/purchase types; removed legacy aliases and fields for clarity.
- OpenIAP everywhere: Android uses openiap-google and iOS uses openiap-apple. Shared, centralized logic simplifies maintenance and keeps frameworks in sync.

## üîç Key Changes

‚úÖ Full Integration Across Client Platforms (Android ¬∑ iOS) Platform‚Äëspecific IAP logic has been unified into OpenIAP modules, minimizing fragmentation across ecosystems.

‚úÖ Lean Codebase (~75% reduction) Overall code size has been significantly reduced, lowering complexity and maintenance costs.

‚úÖ Centralized Core Architecture Common logic lives in the core library, enabling consistent behavior and faster feature expansion across frameworks.

‚úÖ Improved Stability & Maintainability Bug fixes and features land once in the core, eliminating duplication and improving reliability.

## üí• Breaking Changes

- Removed fields

  - Removed `transactionReceipt` (use `purchaseToken` on all platforms). On iOS, `purchaseToken` contains the JWS representation previously accessed via receipts.
  - Removed `jwsRepresentationIOS` in favor of the unified `purchaseToken`.

- Removed functions

  - `getProducts`, `getSubscriptions`, `requestProducts`, `requestSubscription`
  - `getPurchaseHistory` / `getPurchaseHistories`
  - Non‚Äësuffixed iOS aliases (use `*IOS` variants)

- Changed behavior
  - `showManageSubscriptionsIOS(): Promise<Purchase[]>` ‚Äî now returns purchases instead of `boolean`.
  - `getAvailablePurchases` options: only accepts `alsoPublishToEventListenerIOS` and `onlyIncludeActiveItemsIOS`.

## Quick Migration

### Fetch products (in‚Äëapp or subs)

```ts
import {fetchProducts, type ProductSubscription} from 'expo-iap';

const inapps = await fetchProducts({skus: ['prod1', 'prod2'], type: 'inapp'});

const subs = (await fetchProducts({
  skus: ['sub_monthly'],
  type: 'subs',
})) as ProductSubscription[];
```

### Request purchase (products or subs)

```ts
import {requestPurchase} from 'expo-iap';

// In‚Äëapp
await requestPurchase({
  request: {ios: {sku: 'prod1'}, android: {skus: ['prod1']}},
  type: 'inapp',
});

// Subscriptions (Android supply offer tokens)
await requestPurchase({
  request: {
    ios: {sku: 'sub_monthly'},
    android: {
      skus: ['sub_monthly'],
      subscriptionOffers: [
        {sku: 'sub_monthly', offerToken: 'your-offer-token'},
      ],
    },
  },
  type: 'subs',
});
```

### Restore/available purchases

```ts
import {getAvailablePurchases, restorePurchases} from 'expo-iap';

// iOS‚Äëspecific flags only
const purchases = await getAvailablePurchases({
  alsoPublishToEventListenerIOS: false,
  onlyIncludeActiveItemsIOS: true,
});

// Cross‚Äëplatform helper that syncs on iOS then lists
const restored = await restorePurchases({
  alsoPublishToEventListenerIOS: false,
  onlyIncludeActiveItemsIOS: true,
});
```

### Tokens and finishing transactions

```ts
import {finishTransaction, type Purchase} from 'expo-iap';

function getToken(p: Purchase) {
  return p.purchaseToken; // iOS: JWS, Android: purchaseToken
}

await finishTransaction({purchase: somePurchase, isConsumable: true});
```

## Notes

- iOS promoted products listener remains `promotedProductListenerIOS`.
- `getStorefront()` stays as the cross‚Äëplatform helper; call `getStorefrontIOS()` for iOS‚Äëexplicit.

## Changelog

See `CHANGELOG.md` for the full list of changes in 3.0.0.

## üîó Repositories to Explore

- [openiap-apple](https://github.com/hyodotdev/openiap-apple) (iOS)
- [openiap-google](https://github.com/hyodotdev/openiap-google) (Android)

The OpenIAP core library is where the shared logic and architecture live ‚Äî the foundation for review, extensibility, and cross‚ÄëSDK consistency.

## üåü Why This Matters

- Standardizes the IAP experience across frameworks, improving trust for both developers and users
- Speeds up responses to platform‚Äëspecific issues (fix once at the core)
- Reduces risk and shortens release cycles via a smaller codebase and broader test coverage

Follow for faster updates: [@hyodotdev](https://x.com/hyodotdev)
